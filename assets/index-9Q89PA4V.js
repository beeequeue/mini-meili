import{A as e,B as t,C as n,D as r,E as i,G as a,H as o,I as s,J as c,K as l,L as u,M as d,N as f,O as p,P as m,Q as h,R as g,S as _,T as v,U as y,b,d as x,e as S,f as C,g as w,m as T,n as E,o as D,p as O,q as k,r as A,s as j,t as M,u as N,v as P,w as F,x as I,y as L,z as R}from"./svelte-hiCgwaUB.js";import{b as z,c as B}from"./melt-DtTBtuCx.js";import{b as V}from"./meilisearch-DpL3tHVM.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function H(e,t,{signal:n,edges:r}={}){let i,a=null,o=r!=null&&r.includes(`leading`),s=r==null||r.includes(`trailing`),c=()=>{a!==null&&(e.apply(i,a),i=void 0,a=null)},l=()=>{s&&c(),p()},u=null,d=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,l()},t)},f=()=>{u!==null&&(clearTimeout(u),u=null)},p=()=>{f(),i=void 0,a=null},m=()=>{c()},h=function(...e){if(n?.aborted)return;i=this,a=e;let t=u==null;d(),o&&t&&c()};return h.schedule=d,h.cancel=p,h.flush=m,n?.addEventListener(`abort`,p,{once:!0}),h}const U=(e,t,n={})=>{if(!Number.isFinite(t))throw TypeError("Expected `wait` to be a finite number");let r,i,a=[];return function(...o){return new Promise(s=>{let c=n.before&&!i;clearTimeout(i),i=setTimeout(()=>{i=null;let t=n.before?r:e.apply(this,o);for(s of a)s(t);a=[]},t),c?(r=e.apply(this,o),s(r)):a.push(s)})}};U.promise=e=>{let t;return async function(...n){if(t)return t;try{return t=e.apply(this,n),await t}finally{t=void 0}}};var W=class{#apiKey=p(d(new URLSearchParams(window.location.search).get(`api_key`)??localStorage.getItem(`meili_api_key`)));get apiKey(){return i(this.#apiKey)}set apiKey(e){f(this.#apiKey,e,!0)}#host=p(d(new URLSearchParams(window.location.search).get(`host`)??localStorage.getItem(`meili_host`)??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return i(this.#host)}set host(e){f(this.#host,e,!0)}#client=m(()=>new V({host:this.host,apiKey:this.apiKey??void 0,clientAgents:[`mini-meili v?`]}));get client(){return i(this.#client)}set client(e){f(this.#client,e)}};const G=new W;var K=t(`<div></div>`),q=t(`<div><!> <input/></div>`);function J(e,t){g(t,!0);let n=x(t,`value`,15,``),r=S(t,[`$$slots`,`$$events`,`$$legacy`,`icon`,`className`,`value`]);var i=q();let a;var s=c(i),l=e=>{var n=K();let r;o(e=>r=A(n,1,`ml-0.5 mr-2 p-2.5`,null,r,e),[()=>({"i-lucide:search":t.icon===`search`,"i-lucide:key-round":t.icon===`key`,"i-lucide:globe":t.icon===`url`})]),R(e,n)};F(s,e=>{t.icon!=null&&e(l)});var d=u(s,2);O(d),D(d,()=>({id:`search`,...r,class:`w-full p-0`})),v(i),o(()=>a=A(i,1,j(t.className),null,a,{flex:!0,"items-center":!0,"b-b-solid":!0,"b-b-2":!0,"b-red-4":!0,"bg-#151515":!0,"p-2":!0})),T(d,n),R(e,i),h()}var Y=t(`<div class="i-lucide:loader h-5 w-5 animate-spin"></div>`),X=t(`<button></button>`),ee=t(`<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>`),te=t(`<button><span class="i-lucide:settings"></span> Config</button> <!>`,1);function Z(e,t){g(t,!0);let[n,r]=C(),a=()=>w(O,`$trigger`,n),o=()=>w(k,`$portalled`,n),m=()=>w(A,`$overlay`,n),_=()=>w(j,`$content`,n),y=()=>w(N,`$title`,n),x=()=>w(P,`$close`,n),S=()=>w(I,`$open`,n),T=e=>{try{return new URL(e),!0}catch{return!1}},{elements:{trigger:O,portalled:k,overlay:A,content:j,title:N,close:P},states:{open:I}}=B({defaultOpen:G.apiKey==null,role:G.apiKey==null?`alertdialog`:`dialog`,escapeBehavior:G.apiKey==null?`ignore`:`close`,closeOnOutsideClick:G.apiKey!=null}),L=p(!1),z=p(d(G.apiKey??``)),H=p(d(G.host)),W=U(async()=>{try{let e=new V({host:i(H),apiKey:i(z).length>0?i(z):void 0});return await Promise.all([e.getIndexes(),e.getStats(),e.getVersion()]),!0}catch{return!1}},350);s(()=>{if(i(H).length<3||!T(i(H)))return;let e=G.apiKey;f(L,!0),W().then(t=>{f(L,!1),t&&(G.host=i(H),G.apiKey=i(z),localStorage.setItem(`meili_host`,G.host),G.apiKey!=null&&localStorage.setItem(`meili_api_key`,G.apiKey),e??I.set(!1))})});var K=te(),q=l(K);D(q,()=>({...a(),class:`fixed left-0 top-0 flex cursor-pointer items-center gap-1 px-4 py-3`})),M(q,e=>a().action?.(e));var Z=u(q,2),Q=e=>{var t=ee();D(t,()=>({...o()}));var n=c(t);D(n,()=>({...m(),class:`z-100 fixed inset-0 bg-black/50`})),M(n,e=>m().action?.(e));var r=u(n,2);D(r,()=>({..._(),class:`z-101 w-90% max-w-400px left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black`}));var a=c(r),s=c(a);D(s,()=>({...y(),class:`m-0`})),M(s,e=>y().action?.(e));var l=u(s,2),d=e=>{var t=Y();E(3,t,()=>b),R(e,t)};F(l,e=>{i(L)&&e(d)});var p=u(l,2),h=e=>{var t=X();D(t,()=>({...x(),"aria-label":`Close config dialog`,class:`i-lucide:x ml-auto cursor-pointer p-3`})),M(t,e=>x().action?.(e)),E(3,t,()=>b),R(e,t)};F(p,e=>{G.apiKey!=null&&e(h)}),v(a);var g=u(a,2),S=u(c(g));J(S,{id:`apiKey`,icon:`key`,className:`mt-1`,get value(){return i(z)},set value(e){f(z,e,!0)}}),v(g);var C=u(g,2),w=u(c(C));J(w,{id:`host`,icon:`url`,className:`mt-1`,get value(){return i(H)},set value(e){f(H,e,!0)}}),v(C),v(r),M(r,e=>_().action?.(e)),v(t),M(t,e=>o().action?.(e)),R(e,t)};F(Z,e=>{S()&&e(Q)}),R(e,K),h(),r()}var Q=t(`<div> <div></div> <span class="text-2.75 ml-auto"> </span></div>`),ne=t(`<div></div>`),re=t(`<button> <span></span></button> <!>`,1);function ie(e,t){g(t,!0);let[n,r]=C(),d=()=>w(T,`$trigger`,n),f=()=>w(O,`$menu`,n),p=()=>w(j,`$open`,n),_=()=>w(k,`$option`,n),y=()=>w(B,`$isSelected`,n),S=x(t,`selected`,15);s(()=>{S()!=null&&a(()=>{I.set({value:S()})})});let{elements:{trigger:T,menu:O,option:k},states:{open:j,selected:I},helpers:{isSelected:B}}=z({forceVisible:!0,positioning:{placement:`bottom`,fitViewport:!0,sameWidth:!0}});I.subscribe(e=>{e!=null&&S(e.value)});var V=re(),H=l(V);D(H,()=>({class:`bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3`,...d(),"aria-label":`Select an index`}));var U=c(H),W=u(U);let G;v(H),M(H,e=>d().action?.(e));var K=u(H,2),q=e=>{var n=ne();D(n,()=>({class:`bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0`,...f()})),N(n,21,()=>t.indexes,P,(e,t)=>{let n=m(()=>_()({value:i(t).uid}));var r=Q();D(r,()=>({class:`data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2`,...i(n)}));var a=c(r),s=u(a);let l;var d=u(s,2),f=c(d,!0);v(d),v(r),M(r,e=>i(n).action?.(e)),o(e=>{L(a,`${i(t).uid??``} `),l=A(s,1,`i-lucide:check h-5 w-5 opacity-0`,null,l,e),L(f,i(t).count)},[()=>({"opacity-100":y()(i(t).uid)})]),R(e,r)}),v(n),M(n,e=>f().action?.(e)),E(3,n,()=>b,()=>({duration:150})),R(e,n)};F(K,e=>{p()&&e(q)}),o(e=>{L(U,`${S()??`Select an index`??``} `),G=A(W,1,`i-lucide:chevron-down transition-property-transform transition`,null,G,e)},[()=>({"rotate-180":p()})]),R(e,V),h(),r()}var ae=t(`<span class="uno-css-kxznfu"> </span> <!>`,1),oe=t(`<div class="text-3.5"></div>`),se=t(`<a target="_blank" rel="noopener" class="line-clamp-3 flex items-center gap-2 text-sm"><img class="max-h-16 max-w-96 object-contain"/> <!></a>`),ce=t(`<a target="_blank" rel="noopener"> </a>`),le=t(` <br/>`,1),ue=t(` <br/>`,1),de=t(`<td><!></td>`);function $(t,r){g(r,!0);let a=new Set([`png`,`jpg`,`jpeg`,`gif`,`webp`,`svg`]),s=m(()=>typeof r.value==`string`&&r.value?.startsWith(`https://`)),d=m(()=>i(s)?r.value.slice(r.value.lastIndexOf(`.`)):null),f=m(()=>i(s)&&a.has(i(d)));var p=de(),b=c(p),x=e=>{var t=n();o(()=>L(t,r.value===null?`null`:`undefined`)),R(e,t)},S=t=>{var a=e(),d=l(a),p=e=>{var t=n();o(e=>L(t,e),[()=>r.value.join(`, `)]),R(e,t)},h=t=>{var a=e(),d=l(a),p=e=>{var t=oe();N(t,21,()=>Object.entries(r.value).filter(([e])=>e!==`id`),P,(e,t,n,r)=>{var a=m(()=>y(i(t),2));let s=()=>i(a)[0],d=()=>i(a)[1];var f=ae(),p=l(f),h=c(p);v(p);var g=u(p,2);$(g,{get key(){return s()},get value(){return d()},class:`uno-css-vq2t6k`}),o(()=>L(h,`${s()??``}:`)),R(e,f)}),v(t),R(e,t)},h=t=>{var a=e(),d=l(a),p=e=>{var t=n();o(e=>L(t,e),[()=>r.value.toString()]),R(e,t)},m=t=>{var a=e(),d=l(a),p=t=>{var a=e(),d=l(a),p=e=>{var t=se(),a=c(t),l=u(a,2),d=e=>{var t=n();o(()=>L(t,r.value)),R(e,t)};F(l,e=>{i(s)&&e(d)}),v(t),o(()=>{k(t,`href`,r.value),k(a,`src`,r.value),k(a,`alt`,r.key)}),R(e,t)},m=t=>{var a=e(),u=l(a),d=e=>{var t=ce(),n=c(t,!0);v(t),o(()=>{k(t,`href`,r.value),L(n,r.value)}),R(e,t)},p=t=>{var a=e(),s=l(a),c=t=>{var n=e(),a=l(n);N(a,17,()=>r.value.split(`
`),P,(e,t)=>{_();var n=le(),r=l(n);_(),o(()=>L(r,`${i(t)??``} `)),R(e,n)}),R(t,n)},u=t=>{var a=e(),s=l(a),c=t=>{var n=e(),a=l(n);N(a,17,()=>r.value.split(`\r
`),P,(e,t)=>{_();var n=ue(),r=l(n);_(),o(()=>L(r,`${i(t)??``} `)),R(e,n)}),R(t,n)},u=e=>{var t=n();o(()=>L(t,r.value)),R(e,t)};F(s,e=>{r.value.includes?.(`\r
`)?e(c):e(u,!1)},!0),R(t,a)};F(s,e=>{r.value.includes?.(`
`)?e(c):e(u,!1)},!0),R(t,a)};F(u,e=>{i(s)&&!i(f)?e(d):e(p,!1)},!0),R(t,a)};F(d,e=>{r.value.startsWith(`data:image/`)||i(s)&&(i(f)||r.key.toLowerCase().includes(`image`))?e(p):e(m,!1)}),R(t,a)};F(d,e=>{typeof r.value==`string`&&e(p)},!0),R(t,a)};F(d,e=>{typeof r.value==`boolean`||typeof r.value==`number`?e(p):e(m,!1)},!0),R(t,a)};F(d,e=>{typeof r.value==`object`?e(p):e(h,!1)},!0),R(t,a)};F(d,e=>{Array.isArray(r.value)?e(p):e(h,!1)},!0),R(t,a)};F(b,e=>{r.value===null||r.value===void 0?e(x):e(S,!1)}),v(p),o(()=>A(p,1,j([`uno-css-ushu4l`,r.class]))),R(t,p),h()}const fe=async(e,t,n,r)=>{if(i(t)==null)return;let a=await G.client.index(i(n)).search(i(r),{page:i(t).page+1});f(t,{...a,hits:[...i(t).hits,...a.hits]})};var pe=t(`<tr class="uno-534ysd"><td class="uno-reutmv"> </td><!></tr>`),me=t(`<table class="uno-rxr413"><tbody></tbody></table>`),he=t(`<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>`),ge=t(`<div class="mt-4"><span> </span></div> <div class="uno-u29eo3"><!> <!></div>`,1),_e=t(`<!> <main><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>•</span> <span class="text-3.5"> </span></div>`,1);function ve(e,t){g(t,!0),s(()=>{window.history.pushState({},``,window.location.pathname)});let n=p(``);s(()=>{i(n).length<2||i(a)==null||b(i(n))});let r=p([]),a=p(null),d=async()=>{let e=await G.client.getStats();f(r,Object.entries(e.indexes).map(([e,{numberOfDocuments:t}])=>({uid:e,count:t}))),i(r).length===1&&f(a,i(r)[0].uid,!0)};d();let _=p(null),y=m(()=>(i(_)?.hits.length??0)!==0),b=H(async e=>{let t=await G.client.index(i(a)).search(e,{page:1});f(_,t)},250);var x=_e(),S=l(x);Z(S,{});var C=u(S,2);let w;var T=c(C),E=c(T);ie(E,{get indexes(){return i(r)},get selected(){return i(a)},set selected(e){f(a,e,!0)}});var D=u(E,2);J(D,{id:`search`,icon:`search`,className:`w-300px`,placeholder:`Search for something...`,get value(){return i(n)},set value(e){f(n,e,!0)}}),v(T);var O=u(T,2),k=e=>{var t=ge(),r=l(t),s=c(r),d=c(s);v(s),v(r);var f=u(r,2),p=c(f);N(p,17,()=>i(_).hits,P,(e,t)=>{var n=me(),r=c(n);N(r,21,()=>Object.keys(i(t)),P,(e,n)=>{var r=pe(),a=c(r),s=c(a,!0);v(a);var l=u(a);$(l,{get key(){return i(n)},get value(){return i(t)[i(n)]}}),v(r),o(()=>L(s,i(n))),R(e,r)}),v(r),v(n),R(e,n)});var m=u(p,2),h=e=>{var t=he();t.__click=[fe,_,a,n],R(e,t)};F(m,e=>{(i(_).totalPages??0)>(i(_).page??0)&&e(h)}),v(f),o(()=>L(d,`${i(_).estimatedTotalHits??i(_).totalHits??i(_).hits.length??``} hits in
        ${i(_).processingTimeMs??``}ms`)),R(e,t)};F(O,e=>{i(_)!=null&&e(k)}),v(C);var j=u(C,2),M=u(c(j),4),I=c(M,!0);v(M),v(j),o((e,t)=>{w=A(C,1,`md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition`,null,w,e),L(I,t)},[()=>({"pt-50px":i(y)}),()=>(void 0)(0,7)]),R(e,x),h()}r([`click`]),I(ve,{target:document.getElementById(`root`)});