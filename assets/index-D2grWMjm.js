import{A as e,B as t,C as n,D as r,E as i,F as a,G as o,H as s,I as c,L as l,M as u,N as d,P as f,R as p,S as m,T as h,U as g,V as _,W as v,_ as y,a as b,b as x,f as S,g as C,h as w,i as T,j as E,k as D,m as O,o as k,p as A,r as j,t as M,v as N,w as P,x as F,y as I,z as L}from"./svelte-Be-tsVk1.js";import{n as R,t as z}from"./melt-4-O4NZ9F.js";import{t as B}from"./meilisearch-q-WYwYHb.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function V(e,t,{signal:n,edges:r}={}){let i,a=null,o=r!=null&&r.includes(`leading`),s=r==null||r.includes(`trailing`),c=()=>{a!==null&&(e.apply(i,a),i=void 0,a=null)},l=()=>{s&&c(),p()},u=null,d=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,l()},t)},f=()=>{u!==null&&(clearTimeout(u),u=null)},p=()=>{f(),i=void 0,a=null},m=()=>{c()},h=function(...e){if(n?.aborted)return;i=this,a=e;let t=u==null;d(),o&&t&&c()};return h.schedule=d,h.cancel=p,h.flush=m,n?.addEventListener(`abort`,p,{once:!0}),h}var H=(e,t,n={})=>{if(!Number.isFinite(t))throw TypeError("Expected `wait` to be a finite number");let r,i,a=[];return function(...o){return new Promise(s=>{let c=n.before&&!i;clearTimeout(i),i=setTimeout(()=>{i=null;let t=n.before?r:e.apply(this,o);for(s of a)s(t);a=[]},t),c?(r=e.apply(this,o),s(r)):a.push(s)})}};H.promise=e=>{let t;return async function(...n){if(t)return t;try{return t=e.apply(this,n),await t}finally{t=void 0}}};var U=H;const W=new class{#e=l(a(new URLSearchParams(window.location.search).get(`api_key`)??localStorage.getItem(`meili_api_key`)));get apiKey(){return r(this.#e)}set apiKey(e){c(this.#e,e,!0)}#t=l(a(new URLSearchParams(window.location.search).get(`host`)??localStorage.getItem(`meili_host`)??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return r(this.#t)}set host(e){c(this.#t,e,!0)}#n=p(()=>new B({host:this.host,apiKey:this.apiKey??void 0,clientAgents:[`mini-meili v?`]}));get client(){return r(this.#n)}set client(e){c(this.#n,e)}};var G=P(`<div></div>`),K=P(`<div><!> <input/></div>`);function q(t,n){s(n,!0);let r=j(n,`value`,15,``),i=T(n,[`$$slots`,`$$events`,`$$legacy`,`icon`,`className`,`value`]);var a=K();let o;var c=u(a),l=t=>{var r=G();let i;e(()=>i=C(r,1,`ml-0.5 mr-2 p-2.5`,null,i,{"i-lucide:search":n.icon===`search`,"i-lucide:key-round":n.icon===`key`,"i-lucide:globe":n.icon===`url`})),m(t,r)};I(c,e=>{n.icon!=null&&e(l)});var d=f(c,2);O(d,()=>({id:`search`,...i,class:`w-full p-0`}),void 0,void 0,void 0,void 0,!0),v(a),e(()=>o=C(a,1,y(n.className),null,o,{flex:!0,"items-center":!0,"b-b-solid":!0,"b-b-2":!0,"b-red-4":!0,"bg-#151515":!0,"p-2":!0})),S(d,r),m(t,a),_()}var J=P(`<div class="i-lucide:loader h-5 w-5 animate-spin"></div>`),Y=P(`<button></button>`),ee=P(`<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>`),te=P(`<button><span class="i-lucide:settings"></span> Config</button> <!>`,1);function X(e,t){s(t,!0);let n=()=>k(w,`$trigger`,x),i=()=>k(T,`$portalled`,x),o=()=>k(D,`$overlay`,x),p=()=>k(j,`$content`,x),h=()=>k(P,`$title`,x),g=()=>k(F,`$close`,x),y=()=>k(L,`$open`,x),[x,S]=b(),C=e=>{try{return new URL(e),!0}catch{return!1}},{elements:{trigger:w,portalled:T,overlay:D,content:j,title:P,close:F},states:{open:L}}=R({defaultOpen:W.apiKey==null,role:W.apiKey==null?`alertdialog`:`dialog`,escapeBehavior:W.apiKey==null?`ignore`:`close`,closeOnOutsideClick:W.apiKey!=null}),z=l(!1),V=l(a(W.apiKey??``)),H=l(a(W.host)),G=U(async()=>{try{let e=new B({host:r(H),apiKey:r(V).length>0?r(V):void 0});return await Promise.all([e.getIndexes(),e.getStats(),e.getVersion()]),!0}catch{return!1}},350);E(()=>{if(r(H).length<3||!C(r(H)))return;let e=W.apiKey;c(z,!0),G().then(t=>{c(z,!1),t&&(W.host=r(H),W.apiKey=r(V),localStorage.setItem(`meili_host`,W.host),W.apiKey!=null&&localStorage.setItem(`meili_api_key`,W.apiKey),e??L.set(!1))})});var K=te(),X=d(K);O(X,()=>({...n(),class:`fixed left-0 top-0 flex cursor-pointer items-center gap-1 px-4 py-3`})),N(X,e=>n().action?.(e));var Z=f(X,2),Q=e=>{var t=ee();O(t,()=>({...i()}));var n=u(t);O(n,()=>({...o(),class:`z-100 fixed inset-0 bg-black/50`})),N(n,e=>o().action?.(e));var a=f(n,2);O(a,()=>({...p(),class:`z-101 w-90% max-w-400px left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black`}));var s=u(a),l=u(s);O(l,()=>({...h(),class:`m-0`})),N(l,e=>h().action?.(e));var d=f(l,2),_=e=>{var t=J();A(3,t,()=>M),m(e,t)};I(d,e=>{r(z)&&e(_)});var y=f(d,2),b=e=>{var t=Y();O(t,()=>({...g(),"aria-label":`Close config dialog`,class:`i-lucide:x ml-auto cursor-pointer p-3`})),N(t,e=>g().action?.(e)),A(3,t,()=>M),m(e,t)};I(y,e=>{W.apiKey!=null&&e(b)}),v(s);var x=f(s,2);q(f(u(x)),{id:`apiKey`,icon:`key`,className:`mt-1`,get value(){return r(V)},set value(e){c(V,e,!0)}}),v(x);var S=f(x,2);q(f(u(S)),{id:`host`,icon:`url`,className:`mt-1`,get value(){return r(H)},set value(e){c(H,e,!0)}}),v(S),v(a),N(a,e=>p().action?.(e)),v(t),N(t,e=>i().action?.(e)),m(e,t)};I(Z,e=>{y()&&e(Q)}),m(e,K),_(),S()}var Z=P(`<div> <div></div> <span class="text-2.75 ml-auto"> </span></div>`),Q=P(`<div></div>`),ne=P(`<button> <span></span></button> <!>`,1);function re(n,i){s(i,!0);let a=()=>k(S,`$trigger`,g),o=()=>k(w,`$menu`,g),c=()=>k(P,`$open`,g),l=()=>k(T,`$option`,g),h=()=>k(B,`$isSelected`,g),[g,y]=b(),x=j(i,`selected`,15);E(()=>{x()!=null&&D(()=>{R.set({value:x()})})});let{elements:{trigger:S,menu:w,option:T},states:{open:P,selected:R},helpers:{isSelected:B}}=z({forceVisible:!0,positioning:{placement:`bottom`,fitViewport:!0,sameWidth:!0}});R.subscribe(e=>{e!=null&&x(e.value)});var V=ne(),H=d(V);O(H,()=>({class:`bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3`,...a(),"aria-label":`Select an index`}));var U=u(H),W=f(U);let G;v(H),N(H,e=>a().action?.(e));var K=f(H,2),q=n=>{var a=Q();O(a,()=>({class:`bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0`,...o()})),L(a,21,()=>i.indexes,t,(t,n)=>{let i=p(()=>l()({value:r(n).uid}));var a=Z();O(a,()=>({class:`data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2`,...r(i)}));var o=u(a),s=f(o);let c;var d=f(s,2),g=u(d,!0);v(d),v(a),N(a,e=>r(i).action?.(e)),e(e=>{F(o,`${r(n).uid??``} `),c=C(s,1,`i-lucide:check h-5 w-5 opacity-0`,null,c,e),F(g,r(n).count)},[()=>({"opacity-100":h()(r(n).uid)})]),m(t,a)}),v(a),N(a,e=>o().action?.(e)),A(3,a,()=>M,()=>({duration:150})),m(n,a)};I(K,e=>{c()&&e(q)}),e(()=>{F(U,`${x()??`Select an index`??``} `),G=C(W,1,`i-lucide:chevron-down transition-property-transform transition`,null,G,{"rotate-180":c()})}),m(n,V),_(),y()}var ie=P(`<span class="uno-css-kxznfu"> </span> <!>`,1),ae=P(`<div class="text-3.5"></div>`),oe=P(`<a target="_blank" rel="noopener" class="line-clamp-3 flex items-center gap-2 text-sm"><img class="max-h-16 max-w-96 object-contain"/> <!></a>`),se=P(`<a target="_blank" rel="noopener"> </a>`),ce=P(` <br/>`,1),le=P(` <br/>`,1),ue=P(`<td><!></td>`);function $(i,a){s(a,!0);let c=new Set([`png`,`jpg`,`jpeg`,`gif`,`webp`,`svg`]),l=p(()=>typeof a.value==`string`&&a.value?.startsWith(`https://`)),b=p(()=>r(l)?a.value.slice(a.value.lastIndexOf(`.`)):null),x=p(()=>r(l)&&c.has(r(b)));var S=ue(),T=u(S),E=t=>{var n=h();e(()=>F(n,a.value===null?`null`:`undefined`)),m(t,n)},D=i=>{var s=n(),c=d(s),_=t=>{var n=h();e(e=>F(n,e),[()=>a.value.join(`, `)]),m(t,n)},y=i=>{var s=n(),c=d(s),_=n=>{var i=ae();L(i,21,()=>Object.entries(a.value).filter(([e])=>e!==`id`),t,(t,n,i,a)=>{var s=p(()=>o(r(n),2));let c=()=>r(s)[0],l=()=>r(s)[1];var h=ie(),g=d(h),_=u(g);v(g),$(f(g,2),{get key(){return c()},get value(){return l()},class:`uno-css-vq2t6k`}),e(()=>F(_,`${c()??``}:`)),m(t,h)}),v(i),m(n,i)},y=i=>{var o=n(),s=d(o),c=t=>{var n=h();e(e=>F(n,e),[()=>a.value.toString()]),m(t,n)},p=i=>{var o=n(),s=d(o),c=i=>{var o=n(),s=d(o),c=t=>{var n=oe(),i=u(n),o=f(i,2),s=t=>{var n=h();e(()=>F(n,a.value)),m(t,n)};I(o,e=>{r(l)&&e(s)}),v(n),e(()=>{w(n,`href`,a.value),w(i,`src`,a.value),w(i,`alt`,a.key)}),m(t,n)},p=i=>{var o=n(),s=d(o),c=t=>{var n=se(),r=u(n,!0);v(n),e(()=>{w(n,`href`,a.value),F(r,a.value)}),m(t,n)},f=i=>{var o=n(),s=d(o),c=i=>{var o=n();L(d(o),17,()=>a.value.split(`
`),t,(t,n)=>{g();var i=ce(),a=d(i);g(),e(()=>F(a,`${r(n)??``} `)),m(t,i)}),m(i,o)},l=i=>{var o=n(),s=d(o),c=i=>{var o=n();L(d(o),17,()=>a.value.split(`\r
`),t,(t,n)=>{g();var i=le(),a=d(i);g(),e(()=>F(a,`${r(n)??``} `)),m(t,i)}),m(i,o)},l=t=>{var n=h();e(()=>F(n,a.value)),m(t,n)};I(s,e=>{a.value.includes?.(`\r
`)?e(c):e(l,!1)},!0),m(i,o)};I(s,e=>{a.value.includes?.(`
`)?e(c):e(l,!1)},!0),m(i,o)};I(s,e=>{r(l)&&!r(x)?e(c):e(f,!1)},!0),m(i,o)};I(s,e=>{a.value.startsWith(`data:image/`)||r(l)&&(r(x)||a.key.toLowerCase().includes(`image`))?e(c):e(p,!1)}),m(i,o)};I(s,e=>{typeof a.value==`string`&&e(c)},!0),m(i,o)};I(s,e=>{typeof a.value==`boolean`||typeof a.value==`number`?e(c):e(p,!1)},!0),m(i,o)};I(c,e=>{typeof a.value==`object`?e(_):e(y,!1)},!0),m(i,s)};I(c,e=>{Array.isArray(a.value)?e(_):e(y,!1)},!0),m(i,s)};I(T,e=>{a.value===null||a.value===void 0?e(E):e(D,!1)}),v(S),e(()=>C(S,1,y([`uno-css-ushu4l`,a.class]))),m(i,S),_()}var de=P(`<tr class="uno-534ysd"><td class="uno-reutmv"> </td><!></tr>`),fe=P(`<table class="uno-rxr413"><tbody></tbody></table>`),pe=P(`<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>`),me=P(`<div class="mt-4"><span> </span></div> <div class="uno-u29eo3"><!> <!></div>`,1),he=P(`<!> <main><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>â€¢</span> <span class="text-3.5"> </span></div>`,1);function ge(n,i){s(i,!0),E(()=>{window.history.pushState({},``,window.location.pathname)});let a=l(``);E(()=>{r(a).length<2||r(h)==null||b(r(a))});let o=l([]),h=l(null);(async()=>{let e=await W.client.getStats();c(o,Object.entries(e.indexes).map(([e,{numberOfDocuments:t}])=>({uid:e,count:t}))),r(o).length===1&&c(h,r(o)[0].uid,!0)})();let g=l(null),y=p(()=>(r(g)?.hits.length??0)!==0),b=V(async e=>{c(g,await W.client.index(r(h)).search(e,{page:1}))},250),x=async()=>{if(r(g)==null)return;let e=await W.client.index(r(h)).search(r(a),{page:r(g).page+1});c(g,{...e,hits:[...r(g).hits,...e.hits]})};var S=he(),w=d(S);X(w,{});var T=f(w,2);let D;var O=u(T),k=u(O);re(k,{get indexes(){return r(o)},get selected(){return r(h)},set selected(e){c(h,e,!0)}}),q(f(k,2),{id:`search`,icon:`search`,className:`w-300px`,placeholder:`Search for something...`,get value(){return r(a)},set value(e){c(a,e,!0)}}),v(O);var A=f(O,2),j=n=>{var i=me(),a=d(i),o=u(a),s=u(o);v(o),v(a);var c=f(a,2),l=u(c);L(l,17,()=>r(g).hits,t,(n,i)=>{var a=fe(),o=u(a);L(o,21,()=>Object.keys(r(i)),t,(t,n)=>{var a=de(),o=u(a),s=u(o,!0);v(o),$(f(o),{get key(){return r(n)},get value(){return r(i)[r(n)]}}),v(a),e(()=>F(s,r(n))),m(t,a)}),v(o),v(a),m(n,a)});var p=f(l,2),h=e=>{var t=pe();t.__click=x,m(e,t)};I(p,e=>{(r(g).totalPages??0)>(r(g).page??0)&&e(h)}),v(c),e(()=>F(s,`${r(g).estimatedTotalHits??r(g).totalHits??r(g).hits.length??``} hits in
        ${r(g).processingTimeMs??``}ms`)),m(n,i)};I(A,e=>{r(g)!=null&&e(j)}),v(T);var M=f(T,2),N=f(u(M),4),P=u(N,!0);v(N),v(M),e(()=>{D=C(T,1,`md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition`,null,D,{"pt-50px":r(y)}),F(P,`8233653`)}),m(n,S),_()}i([`click`]),x(ge,{target:document.getElementById(`root`)});