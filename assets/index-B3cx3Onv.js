import{__esmMin as e}from"./rolldown-runtime-kKC3hjsC.js";import{action as t,append as n,attribute_effect as r,bind_value as i,child as a,clsx as o,comment as s,delegate as c,each as l,fade as u,first_child as d,from_html as f,get$1 as p,if_block as m,index as h,init_client as g,init_disclose_version as _,init_index_client$1 as v,init_transition as y,mount as b,next as x,pop as S,prop as C,proxy as w,push as T,remove_input_defaults as E,reset as D,rest_props as O,set as k,set_class as A,set_text as j,setup_stores as M,sibling as N,state as P,store_get as F,template_effect as I,text as L,transition as R,untrack as z,user_derived as B,user_effect as V}from"./svelte-D6kL7xIK.js";import{createDialog as H,createSelect as U,init_dist as W}from"./melt-BSFebIm3.js";import{MeiliSearch as G,init_esm as K}from"./meilisearch-DpPdnDKe.js";var q=e(()=>{(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})()}),ee=e(()=>{});function te(e,t,{signal:n,edges:r}={}){let i,a=null,o=r!=null&&r.includes(`leading`),s=r==null||r.includes(`trailing`),c=()=>{a!==null&&(e.apply(i,a),i=void 0,a=null)},l=()=>{s&&c(),p()},u=null,d=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,l()},t)},f=()=>{u!==null&&(clearTimeout(u),u=null)},p=()=>{f(),i=void 0,a=null},m=()=>{f(),c()},h=function(...e){if(n?.aborted)return;i=this,a=e;let t=u==null;d(),o&&t&&c()};return h.schedule=d,h.cancel=p,h.flush=m,n?.addEventListener(`abort`,p,{once:!0}),h}var ne=e(()=>{}),re=e(()=>{ne()}),J,Y,ie=e(()=>{J=(e,t,n={})=>{if(!Number.isFinite(t))throw TypeError("Expected `wait` to be a finite number");let r,i,a=[];return function(...o){return new Promise(s=>{let c=n.before&&!i;clearTimeout(i),i=setTimeout(()=>{i=null;let t=n.before?r:e.apply(this,o);for(s of a)s(t);a=[]},t),c?(r=e.apply(this,o),s(r)):a.push(s)})}},J.promise=e=>{let t;return async function(...n){if(t)return t;try{return t=e.apply(this,n),await t}finally{t=void 0}}},Y=J}),X,Z,ae=e(()=>{g(),K(),X=class{#apiKey=P(w(new URLSearchParams(window.location.search).get(`api_key`)??localStorage.getItem(`meili_api_key`)));get apiKey(){return p(this.#apiKey)}set apiKey(e){k(this.#apiKey,e,!0)}#host=P(w(new URLSearchParams(window.location.search).get(`host`)??localStorage.getItem(`meili_host`)??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return p(this.#host)}set host(e){k(this.#host,e,!0)}#client=B(()=>new G({host:this.host,apiKey:this.apiKey??void 0,clientAgents:[`mini-meili v?`]}));get client(){return p(this.#client)}set client(e){k(this.#client,e)}},Z=new X});function Q(e,t){T(t,!0);let s=C(t,`value`,15,``),c=O(t,[`$$slots`,`$$events`,`$$legacy`,`icon`,`className`,`value`]);var l=se();let u;var d=a(l),f=e=>{var r=oe();let i;I(e=>i=A(r,1,`ml-0.5 mr-2 p-2.5`,null,i,e),[()=>({"i-lucide:search":t.icon===`search`,"i-lucide:key-round":t.icon===`key`,"i-lucide:globe":t.icon===`url`})]),n(e,r)};m(d,e=>{t.icon!=null&&e(f)});var p=N(d,2);E(p),r(p,()=>({id:`search`,...c,class:`w-full p-0`})),D(l),I(()=>u=A(l,1,o(t.className),null,u,{flex:!0,"items-center":!0,"b-b-solid":!0,"b-b-2":!0,"b-red-4":!0,"bg-#151515":!0,"p-2":!0})),i(p,s),n(e,l),S()}var oe,se,ce=e(()=>{_(),g(),oe=f(`<div></div>`),se=f(`<div><!> <input/></div>`)});function le(e,i){T(i,!0);let[o,s]=M(),c=()=>F(b,`$trigger`,o),l=()=>F(x,`$portalled`,o),f=()=>F(C,`$overlay`,o),h=()=>F(E,`$content`,o),g=()=>F(O,`$title`,o),_=()=>F(A,`$close`,o),v=()=>F(j,`$open`,o),y=e=>{try{return new URL(e),!0}catch{return!1}},{elements:{trigger:b,portalled:x,overlay:C,content:E,title:O,close:A},states:{open:j}}=H({defaultOpen:Z.apiKey==null,role:Z.apiKey==null?`alertdialog`:`dialog`,escapeBehavior:Z.apiKey==null?`ignore`:`close`,closeOnOutsideClick:Z.apiKey!=null}),I=P(!1),L=P(w(Z.apiKey??``)),z=P(w(Z.host)),B=Y(async()=>{try{let e=new G({host:p(z),apiKey:p(L).length>0?p(L):void 0});return await Promise.all([e.getIndexes(),e.getStats(),e.getVersion()]),!0}catch{return!1}},350);V(()=>{if(p(z).length<3||!y(p(z)))return;let e=Z.apiKey;k(I,!0),B().then(t=>{k(I,!1),t&&(Z.host=p(z),Z.apiKey=p(L),localStorage.setItem(`meili_host`,Z.host),Z.apiKey!=null&&localStorage.setItem(`meili_api_key`,Z.apiKey),e??j.set(!1))})});var U=pe(),W=d(U);r(W,()=>({...c(),class:`fixed left-0 top-0 flex cursor-pointer items-center gap-1 px-4 py-3`})),t(W,e=>c().action?.(e));var K=N(W,2),q=e=>{var i=fe();r(i,()=>({...l()}));var o=a(i);r(o,()=>({...f(),class:`z-100 fixed inset-0 bg-black/50`})),t(o,e=>f().action?.(e));var s=N(o,2);r(s,()=>({...h(),class:`z-101 w-90% max-w-400px left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black`}));var c=a(s),d=a(c);r(d,()=>({...g(),class:`m-0`})),t(d,e=>g().action?.(e));var v=N(d,2),y=e=>{var t=ue();R(3,t,()=>u),n(e,t)};m(v,e=>{p(I)&&e(y)});var b=N(v,2),x=e=>{var i=de();r(i,()=>({..._(),"aria-label":`Close config dialog`,class:`i-lucide:x ml-auto cursor-pointer p-3`})),t(i,e=>_().action?.(e)),R(3,i,()=>u),n(e,i)};m(b,e=>{Z.apiKey!=null&&e(x)}),D(c);var S=N(c,2),C=N(a(S));Q(C,{id:`apiKey`,icon:`key`,className:`mt-1`,get value(){return p(L)},set value(e){k(L,e,!0)}}),D(S);var w=N(S,2),T=N(a(w));Q(T,{id:`host`,icon:`url`,className:`mt-1`,get value(){return p(z)},set value(e){k(z,e,!0)}}),D(w),D(s),t(s,e=>h().action?.(e)),D(i),t(i,e=>l().action?.(e)),n(e,i)};m(K,e=>{v()&&e(q)}),n(e,U),S(),s()}var ue,de,fe,pe,me=e(()=>{_(),g(),W(),K(),ie(),y(),ae(),ce(),ue=f(`<div class="i-lucide:loader h-5 w-5 animate-spin"></div>`),de=f(`<button></button>`),fe=f(`<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>`),pe=f(`<button><span class="i-lucide:settings"></span> Config</button> <!>`,1)});function he(e,i){T(i,!0);let[o,s]=M(),c=()=>F(b,`$trigger`,o),f=()=>F(x,`$menu`,o),g=()=>F(E,`$open`,o),_=()=>F(w,`$option`,o),v=()=>F(k,`$isSelected`,o),y=C(i,`selected`,15);V(()=>{y()!=null&&z(()=>{O.set({value:y()})})});let{elements:{trigger:b,menu:x,option:w},states:{open:E,selected:O},helpers:{isSelected:k}}=U({forceVisible:!0,positioning:{placement:`bottom`,fitViewport:!0,sameWidth:!0}});O.subscribe(e=>{e!=null&&y(e.value)});var P=ve(),L=d(P);r(L,()=>({class:`bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3`,...c(),"aria-label":`Select an index`}));var H=a(L),W=N(H);let G;D(L),t(L,e=>c().action?.(e));var K=N(L,2),q=e=>{var o=_e();r(o,()=>({class:`bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0`,...f()})),l(o,21,()=>i.indexes,h,(e,i)=>{var o=ge();let s=B(()=>_()({value:p(i).uid}));r(o,()=>({class:`data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2`,...p(s)}));var c=a(o),l=N(c);let u;var d=N(l,2),f=a(d,!0);D(d),D(o),t(o,e=>p(s).action?.(e)),I(e=>{j(c,`${p(i).uid??``} `),u=A(l,1,`i-lucide:check h-5 w-5 opacity-0`,null,u,e),j(f,p(i).count)},[()=>({"opacity-100":v()(p(i).uid)})]),n(e,o)}),D(o),t(o,e=>f().action?.(e)),R(3,o,()=>u,()=>({duration:150})),n(e,o)};m(K,e=>{g()&&e(q)}),I(e=>{j(H,`${y()??`Select an index`??``} `),G=A(W,1,`i-lucide:chevron-down transition-property-transform transition`,null,G,e)},[()=>({"rotate-180":g()})]),n(e,P),S(),s()}var ge,_e,ve,ye=e(()=>{_(),g(),W(),v(),y(),ge=f(`<div> <div></div> <span class="text-2.75 ml-auto"> </span></div>`),_e=f(`<div></div>`),ve=f(`<button> <span></span></button> <!>`,1)}),be=e(()=>{});function xe(e,t){T(t,!0),V(()=>{window.history.pushState({},``,window.location.pathname)});let r=P(``);V(()=>{p(r).length<2||p(o)==null||f(p(r))});let i=P([]),o=P(null),c=async()=>{let e=await Z.client.getStats();k(i,Object.entries(e.indexes).map(([e,{numberOfDocuments:t}])=>({uid:e,count:t}))),p(i).length===1&&k(o,p(i)[0].uid,!0)};c();let u=P(null),f=te(async e=>{let t=await Z.client.index(p(o)).search(e,{page:1});k(u,t)},250);var g=Oe(),_=d(g);le(_,{});var v=N(_,2);let y;var b=a(v),C=a(b);he(C,{get indexes(){return p(i)},get selected(){return p(o)},set selected(e){k(o,e,!0)}});var w=N(C,2);Q(w,{id:`search`,icon:`search`,className:`w-300px`,placeholder:`Search for something...`,get value(){return p(r)},set value(e){k(r,e,!0)}}),D(b);var E=N(b,2),O=e=>{var t=De(),i=d(t),c=a(i),f=a(c);D(c),D(i);var g=N(i,2),_=a(g);l(_,17,()=>p(u).hits,h,(e,t)=>{var r=Te(),i=a(r);l(i,21,()=>Object.keys(p(t)),h,(e,r)=>{var i=we(),o=a(i),c=a(o,!0);D(o);var u=N(o),f=a(u),g=e=>{var i=s(),a=d(i);l(a,17,()=>p(t)[p(r)].split(`
`),h,(e,t)=>{x();var r=Ce(),i=d(r);x(),I(()=>j(i,`${p(t)??``} `)),n(e,r)}),n(e,i)},_=(e,i)=>{var a=e=>{var i=s(),a=d(i);l(a,17,()=>p(t)[p(r)].split(`\r
`),h,(e,t)=>{x();var r=$(),i=d(r);x(),I(()=>j(i,`${p(t)??``} `)),n(e,r)}),n(e,i)},o=e=>{var i=L();I(()=>j(i,p(t)[p(r)])),n(e,i)};m(e,e=>{p(t)[p(r)].includes(`\r
`)?e(a):e(o,!1)},i)};m(f,e=>{p(t)[p(r)].includes(`
`)?e(g):e(_,!1)}),D(u),D(i),I(()=>j(c,p(r))),n(e,i)}),D(i),D(r),n(e,r)});var v=N(_,2),y=e=>{var t=Ee();t.__click=[Se,u,o,r],n(e,t)};m(v,e=>{(p(u).totalPages??0)>(p(u).page??0)&&e(y)}),D(g),I(()=>j(f,`${p(u).estimatedTotalHits??p(u).totalHits??p(u).hits.length??``} hits in
        ${p(u).processingTimeMs??``}ms`)),n(e,t)};m(E,e=>{p(u)!=null&&e(O)}),D(v);var M=N(v,2),F=N(a(M),4),R=a(F,!0);D(F),D(M),I((e,t)=>{y=A(v,1,`md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition`,null,y,e),j(R,t)},[()=>({"pt-50px":(p(u)?.hits.length??0)>0}),()=>`8bb39e4`]),n(e,g),S()}var Se,Ce,$,we,Te,Ee,De,Oe,ke=e(()=>{_(),g(),re(),me(),ye(),ae(),ce(),be(),Se=async(e,t,n,r)=>{if(p(t)==null)return;let i=await Z.client.index(p(n)).search(p(r),{page:p(t).page+1});k(t,{...i,hits:[...p(t).hits,...i.hits]})},Ce=f(` <br/>`,1),$=f(` <br/>`,1),we=f(`<tr class="not-last:b-b-solid b-b-1 b-b-red-4"><td class="text-3 text-gray-4 w-fit py-1.5 pl-4 text-end"> </td><td class="text-4.5 w-full select-text px-4 py-1.5 font-serif"><!></td></tr>`),Te=f(`<table class="not-first:mt-4 bg-#151515 rd-lg w-full"><tbody></tbody></table>`),Ee=f(`<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>`),De=f(`<div class="mt-4"><span> </span></div> <div class="pb-50px rd-lg mt-4 flex w-full flex-col items-center overflow-y-auto"><!> <!></div>`,1),Oe=f(`<!> <main><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>•</span> <span class="text-3.5"> </span></div>`,1),c([`click`])}),Ae=e(()=>{}),je=e(()=>{}),Me=e(()=>{}),Ne=e(()=>{}),Pe=e(()=>{}),Fe=e(()=>{}),Ie,Le=e(()=>{v(),ke(),Ae(),je(),Me(),Ne(),Pe(),Fe(),Ie=b(xe,{target:document.getElementById(`root`)})}),Re=e(()=>{q(),ee(),Le()});Re();