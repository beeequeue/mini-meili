import{B as e,C as t,D as n,E as r,F as i,G as a,H as o,I as s,L as c,M as l,N as u,O as d,P as f,R as p,S as m,T as h,U as g,V as _,W as v,_ as y,a as b,b as x,f as S,g as C,h as w,i as T,j as E,k as D,m as O,o as k,p as A,r as j,t as M,v as N,w as P,x as F,y as I,z as L}from"./svelte-koE2ZY3u.js";import{n as R,t as z}from"./melt-Bkt4cegt.js";import{t as B}from"./meilisearch-uYJp_HAw.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function V(e,t,{signal:n,edges:r}={}){let i,a=null,o=r!=null&&r.includes(`leading`),s=r==null||r.includes(`trailing`),c=()=>{a!==null&&(e.apply(i,a),i=void 0,a=null)},l=()=>{s&&c(),p()},u=null,d=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,l()},t)},f=()=>{u!==null&&(clearTimeout(u),u=null)},p=()=>{f(),i=void 0,a=null},m=()=>{c()},h=function(...e){if(n?.aborted)return;i=this,a=e;let t=u==null;d(),o&&t&&c()};return h.schedule=d,h.cancel=p,h.flush=m,n?.addEventListener(`abort`,p,{once:!0}),h}var H=(e,t,n={})=>{if(!Number.isFinite(t))throw TypeError("Expected `wait` to be a finite number");let r,i,a=[];return function(...o){return new Promise(s=>{let c=n.before&&!i;clearTimeout(i),i=setTimeout(()=>{i=null;let t=n.before?r:e.apply(this,o);for(s of a)s(t);a=[]},t),c?(r=e.apply(this,o),s(r)):a.push(s)})}};H.promise=e=>{let t;return async function(...n){if(t)return t;try{return t=e.apply(this,n),await t}finally{t=void 0}}};var U=H;const W=new class{#e=L(c(new URLSearchParams(window.location.search).get(`api_key`)??localStorage.getItem(`meili_api_key`)));get apiKey(){return D(this.#e)}set apiKey(e){p(this.#e,e,!0)}#t=L(c(new URLSearchParams(window.location.search).get(`host`)??localStorage.getItem(`meili_host`)??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return D(this.#t)}set host(e){p(this.#t,e,!0)}#n=e(()=>new B({host:this.host,apiKey:this.apiKey??void 0,clientAgents:[`mini-meili v?`]}));get client(){return D(this.#n)}set client(e){p(this.#n,e)}};var G=r(`<div></div>`),K=r(`<div><!> <input/></div>`);function q(e,t){o(t,!0);let n=j(t,`value`,15,``),r=T(t,[`$$slots`,`$$events`,`$$legacy`,`icon`,`className`,`value`]);var i=K();let a;var c=f(i),u=e=>{var n=G();let r;l(()=>r=C(n,1,`ml-0.5 mr-2 p-2.5`,null,r,{"i-lucide:search":t.icon===`search`,"i-lucide:key-round":t.icon===`key`,"i-lucide:globe":t.icon===`url`})),P(e,n)};F(c,e=>{t.icon!=null&&e(u)});var d=s(c,2);O(d,()=>({id:`search`,...r,class:`w-full p-0`}),void 0,void 0,void 0,void 0,!0),v(i),l(()=>a=C(i,1,y(t.className),null,a,{flex:!0,"items-center":!0,"b-b-solid":!0,"b-b-2":!0,"b-red-4":!0,"bg-#151515":!0,"p-2":!0})),S(d,n),P(e,i),_()}var J=r(`<div class="i-lucide:loader h-5 w-5 animate-spin"></div>`),Y=r(`<button></button>`),ee=r(`<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>`),te=r(`<button><span class="i-lucide:settings"></span> Config</button> <!>`,1);function X(e,t){o(t,!0);let n=()=>k(S,`$trigger`,g),r=()=>k(C,`$portalled`,g),a=()=>k(w,`$overlay`,g),l=()=>k(T,`$content`,g),d=()=>k(E,`$title`,g),m=()=>k(j,`$close`,g),h=()=>k(I,`$open`,g),[g,y]=b(),x=e=>{try{return new URL(e),!0}catch{return!1}},{elements:{trigger:S,portalled:C,overlay:w,content:T,title:E,close:j},states:{open:I}}=R({defaultOpen:W.apiKey==null,role:W.apiKey==null?`alertdialog`:`dialog`,escapeBehavior:W.apiKey==null?`ignore`:`close`,closeOnOutsideClick:W.apiKey!=null}),z=L(!1),V=L(c(W.apiKey??``)),H=L(c(W.host)),G=U(async()=>{try{let e=new B({host:D(H),apiKey:D(V).length>0?D(V):void 0});return await Promise.all([e.getIndexes(),e.getStats(),e.getVersion()]),!0}catch{return!1}},350);u(()=>{if(D(H).length<3||!x(D(H)))return;let e=W.apiKey;p(z,!0),G().then(t=>{p(z,!1),t&&(W.host=D(H),W.apiKey=D(V),localStorage.setItem(`meili_host`,W.host),W.apiKey!=null&&localStorage.setItem(`meili_api_key`,W.apiKey),e??I.set(!1))})});var K=te(),X=i(K);O(X,()=>({...n(),class:`fixed left-0 top-0 flex cursor-pointer items-center gap-1 px-4 py-3`})),N(X,e=>n().action?.(e));var Z=s(X,2),Q=e=>{var t=ee();O(t,()=>({...r()}));var n=f(t);O(n,()=>({...a(),class:`z-100 fixed inset-0 bg-black/50`})),N(n,e=>a().action?.(e));var i=s(n,2);O(i,()=>({...l(),class:`z-101 w-90% max-w-400px left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black`}));var o=f(i),c=f(o);O(c,()=>({...d(),class:`m-0`})),N(c,e=>d().action?.(e));var u=s(c,2),h=e=>{var t=J();A(3,t,()=>M),P(e,t)};F(u,e=>{D(z)&&e(h)});var g=s(u,2),_=e=>{var t=Y();O(t,()=>({...m(),"aria-label":`Close config dialog`,class:`i-lucide:x ml-auto cursor-pointer p-3`})),N(t,e=>m().action?.(e)),A(3,t,()=>M),P(e,t)};F(g,e=>{W.apiKey!=null&&e(_)}),v(o);var y=s(o,2);q(s(f(y)),{id:`apiKey`,icon:`key`,className:`mt-1`,get value(){return D(V)},set value(e){p(V,e,!0)}}),v(y);var b=s(y,2);q(s(f(b)),{id:`host`,icon:`url`,className:`mt-1`,get value(){return D(H)},set value(e){p(H,e,!0)}}),v(b),v(i),N(i,e=>l().action?.(e)),v(t),N(t,e=>r().action?.(e)),P(e,t)};F(Z,e=>{h()&&e(Q)}),P(e,K),_(),y()}var Z=r(`<div> <div></div> <span class="text-2.75 ml-auto"> </span></div>`),Q=r(`<div></div>`),ne=r(`<button> <span></span></button> <!>`,1);function re(n,r){o(r,!0);let a=()=>k(S,`$trigger`,h),c=()=>k(w,`$menu`,h),d=()=>k(L,`$open`,h),p=()=>k(T,`$option`,h),m=()=>k(B,`$isSelected`,h),[h,g]=b(),y=j(r,`selected`,15);u(()=>{y()!=null&&E(()=>{R.set({value:y()})})});let{elements:{trigger:S,menu:w,option:T},states:{open:L,selected:R},helpers:{isSelected:B}}=z({forceVisible:!0,positioning:{placement:`bottom`,fitViewport:!0,sameWidth:!0}});R.subscribe(e=>{e!=null&&y(e.value)});var V=ne(),H=i(V);O(H,()=>({class:`bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3`,...a(),"aria-label":`Select an index`}));var U=f(H),W=s(U);let G;v(H),N(H,e=>a().action?.(e));var K=s(H,2),q=n=>{var i=Q();O(i,()=>({class:`bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0`,...c()})),I(i,21,()=>r.indexes,x,(n,r)=>{let i=e(()=>p()({value:D(r).uid}));var a=Z();O(a,()=>({class:`data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2`,...D(i)}));var o=f(a),c=s(o);let u;var d=s(c,2),h=f(d,!0);v(d),v(a),N(a,e=>D(i).action?.(e)),l(e=>{t(o,`${D(r).uid??``} `),u=C(c,1,`i-lucide:check h-5 w-5 opacity-0`,null,u,e),t(h,D(r).count)},[()=>({"opacity-100":m()(D(r).uid)})]),P(n,a)}),v(i),N(i,e=>c().action?.(e)),A(3,i,()=>M,()=>({duration:150})),P(n,i)};F(K,e=>{d()&&e(q)}),l(()=>{t(U,`${y()??`Select an index`??``} `),G=C(W,1,`i-lucide:chevron-down transition-property-transform transition`,null,G,{"rotate-180":d()})}),P(n,V),_(),g()}var ie=r(`<span class="uno-css-kxznfu"> </span> <!>`,1),ae=r(`<div class="text-3.5"></div>`),oe=r(`<a target="_blank" rel="noopener" class="line-clamp-3 flex items-center gap-2 text-sm"><img class="max-h-16 max-w-96 object-contain"/> <!></a>`),se=r(`<a target="_blank" rel="noopener"> </a>`),ce=r(` <br/>`,1),le=r(` <br/>`,1),ue=r(`<td><!></td>`);function $(r,c){o(c,!0);let u=new Set([`png`,`jpg`,`jpeg`,`gif`,`webp`,`svg`]),d=e(()=>typeof c.value==`string`&&c.value?.startsWith(`https://`)),p=e(()=>D(d)?c.value.slice(c.value.lastIndexOf(`.`)):null),m=e(()=>D(d)&&u.has(D(p)));var b=ue(),S=f(b),T=e=>{var r=n();l(()=>t(r,c.value===null?`null`:`undefined`)),P(e,r)},E=r=>{var o=h(),u=i(o),p=e=>{var r=n();l(e=>t(r,e),[()=>c.value.join(`, `)]),P(e,r)},_=r=>{var o=h(),u=i(o),p=n=>{var r=ae();I(r,21,()=>Object.entries(c.value).filter(([e])=>e!==`id`),x,(n,r,o,c)=>{var u=e(()=>a(D(r),2));let d=()=>D(u)[0],p=()=>D(u)[1];var m=ie(),h=i(m),g=f(h);v(h),$(s(h,2),{get key(){return d()},get value(){return p()},class:`uno-css-vq2t6k`}),l(()=>t(g,`${d()??``}:`)),P(n,m)}),v(r),P(n,r)},_=e=>{var r=h(),a=i(r),o=e=>{var r=n();l(e=>t(r,e),[()=>c.value.toString()]),P(e,r)},u=e=>{var r=h(),a=i(r),o=e=>{var r=h(),a=i(r),o=e=>{var r=oe(),i=f(r),a=s(i,2),o=e=>{var r=n();l(()=>t(r,c.value)),P(e,r)};F(a,e=>{D(d)&&e(o)}),v(r),l(()=>{w(r,`href`,c.value),w(i,`src`,c.value),w(i,`alt`,c.key)}),P(e,r)},u=e=>{var r=h(),a=i(r),o=e=>{var n=se(),r=f(n,!0);v(n),l(()=>{w(n,`href`,c.value),t(r,c.value)}),P(e,n)},s=e=>{var r=h(),a=i(r),o=e=>{var n=h();I(i(n),17,()=>c.value.split(`
`),x,(e,n)=>{g();var r=ce(),a=i(r);g(),l(()=>t(a,`${D(n)??``} `)),P(e,r)}),P(e,n)},s=e=>{var r=h(),a=i(r),o=e=>{var n=h();I(i(n),17,()=>c.value.split(`\r
`),x,(e,n)=>{g();var r=le(),a=i(r);g(),l(()=>t(a,`${D(n)??``} `)),P(e,r)}),P(e,n)},s=e=>{var r=n();l(()=>t(r,c.value)),P(e,r)};F(a,e=>{c.value.includes?.(`\r
`)?e(o):e(s,!1)},!0),P(e,r)};F(a,e=>{c.value.includes?.(`
`)?e(o):e(s,!1)},!0),P(e,r)};F(a,e=>{D(d)&&!D(m)?e(o):e(s,!1)},!0),P(e,r)};F(a,e=>{c.value.startsWith(`data:image/`)||D(d)&&(D(m)||c.key.toLowerCase().includes(`image`))?e(o):e(u,!1)}),P(e,r)};F(a,e=>{typeof c.value==`string`&&e(o)},!0),P(e,r)};F(a,e=>{typeof c.value==`boolean`||typeof c.value==`number`?e(o):e(u,!1)},!0),P(e,r)};F(u,e=>{typeof c.value==`object`?e(p):e(_,!1)},!0),P(r,o)};F(u,e=>{Array.isArray(c.value)?e(p):e(_,!1)},!0),P(r,o)};F(S,e=>{c.value===null||c.value===void 0?e(T):e(E,!1)}),v(b),l(()=>C(b,1,y([`uno-css-ushu4l`,c.class]))),P(r,b),_()}var de=r(`<tr class="uno-534ysd"><td class="uno-reutmv"> </td><!></tr>`),fe=r(`<table class="uno-rxr413"><tbody></tbody></table>`),pe=r(`<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>`),me=r(`<div class="mt-4"><span> </span></div> <div class="uno-u29eo3"><!> <!></div>`,1),he=r(`<!> <main><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>â€¢</span> <span class="text-3.5"> </span></div>`,1);function ge(n,r){o(r,!0),u(()=>{window.history.pushState({},``,window.location.pathname)});let a=L(``);u(()=>{D(a).length<2||D(d)==null||g(D(a))});let c=L([]),d=L(null);(async()=>{let e=await W.client.getStats();p(c,Object.entries(e.indexes).map(([e,{numberOfDocuments:t}])=>({uid:e,count:t}))),D(c).length===1&&p(d,D(c)[0].uid,!0)})();let m=L(null),h=e(()=>(D(m)?.hits.length??0)!==0),g=V(async e=>{p(m,await W.client.index(D(d)).search(e,{page:1}))},250),y=async()=>{if(D(m)==null)return;let e=await W.client.index(D(d)).search(D(a),{page:D(m).page+1});p(m,{...e,hits:[...D(m).hits,...e.hits]})};var b=he(),S=i(b);X(S,{});var w=s(S,2);let T;var E=f(w),O=f(E);re(O,{get indexes(){return D(c)},get selected(){return D(d)},set selected(e){p(d,e,!0)}}),q(s(O,2),{id:`search`,icon:`search`,className:`w-300px`,placeholder:`Search for something...`,get value(){return D(a)},set value(e){p(a,e,!0)}}),v(E);var k=s(E,2),A=e=>{var n=me(),r=i(n),a=f(r),o=f(a);v(a),v(r);var c=s(r,2),u=f(c);I(u,17,()=>D(m).hits,x,(e,n)=>{var r=fe(),i=f(r);I(i,21,()=>Object.keys(D(n)),x,(e,r)=>{var i=de(),a=f(i),o=f(a,!0);v(a),$(s(a),{get key(){return D(r)},get value(){return D(n)[D(r)]}}),v(i),l(()=>t(o,D(r))),P(e,i)}),v(i),v(r),P(e,r)});var d=s(u,2),p=e=>{var t=pe();t.__click=y,P(e,t)};F(d,e=>{(D(m).totalPages??0)>(D(m).page??0)&&e(p)}),v(c),l(()=>t(o,`${D(m).estimatedTotalHits??D(m).totalHits??D(m).hits.length??``} hits in
        ${D(m).processingTimeMs??``}ms`)),P(e,n)};F(k,e=>{D(m)!=null&&e(A)}),v(w);var j=s(w,2),M=s(f(j),4),N=f(M,!0);v(M),v(j),l(()=>{T=C(w,1,`md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition`,null,T,{"pt-50px":D(h)}),t(N,`3c7b686`)}),P(n,b),_()}d([`click`]),m(ge,{target:document.getElementById(`root`)});