import{s as q,p as ue,b as e,c as I,u as $e,e as ve,f as Ke,h as w,i as z,j as S,k as Ne,l as p,m as pe,n as c,q as v,v as oe,x as Oe,y as M,z as Ce,A as de,B as W,C as U,D as Se,E as O,F as be,G as _e,H as j,I as ke,J as ne,K as le,L as Ee,M as we,N as Me,O as Ae}from"./svelte-DqsWNMK8.js";import{c as Ve,a as Ue}from"./melt-B2jD7a8h.js";import{M as Ie}from"./meilisearch-DLeRBbU-.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();function je(m,a,{signal:i,edges:l}={}){let t,s=null;const r=l!=null&&l.includes("leading"),$=l==null||l.includes("trailing"),b=()=>{s!==null&&(m.apply(t,s),t=void 0,s=null)},g=()=>{$&&b(),T()};let u=null;const L=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,g()},a)},P=()=>{u!==null&&(clearTimeout(u),u=null)},T=()=>{P(),t=void 0,s=null},B=()=>{P(),b()},C=function(...D){if(i?.aborted)return;t=this,s=D;const k=u==null;L(),r&&k&&b()};return C.schedule=L,C.cancel=T,C.flush=B,i?.addEventListener("abort",T,{once:!0}),C}const Le=(m,a,i={})=>{if(!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let l,t,s=[];return function(...r){return new Promise($=>{const b=i.before&&!t;clearTimeout(t),t=setTimeout(()=>{t=null;const g=i.before?l:m.apply(this,r);for($ of s)$(g);s=[]},a),b?(l=m.apply(this,r),$(l)):s.push($)})}};Le.promise=m=>{let a;return async function(...i){if(a)return a;try{return a=m.apply(this,i),await a}finally{a=void 0}}};class qe{#e=q(ue(new URLSearchParams(window.location.search).get("api_key")??localStorage.getItem("meili_api_key")));get apiKey(){return e(this.#e)}set apiKey(a){I(this.#e,a,!0)}#t=q(ue(new URLSearchParams(window.location.search).get("host")??localStorage.getItem("meili_host")??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return e(this.#t)}set host(a){I(this.#t,a,!0)}#a=$e(()=>new Ie({host:this.host,apiKey:this.apiKey??void 0,clientAgents:["mini-meili v?"]}));get client(){return e(this.#a)}set client(a){I(this.#a,a)}}const y=new qe;var ze=w("<div></div>"),Be=w("<div><!> <input></div>");function xe(m,a){ve(a,!0);let i=Ke(a,"value",15,""),l=Ce(a,["$$slots","$$events","$$legacy","icon","className","value"]);var t=Be();let s;var r=v(t);{var $=u=>{var L=ze();let P;S(T=>P=oe(L,1,"ml-0.5 mr-2 p-2.5",null,P,T),[()=>({"i-lucide:search":a.icon==="search","i-lucide:key-round":a.icon==="key","i-lucide:globe":a.icon==="url"})]),p(u,L)};z(r,u=>{a.icon!=null&&u($)})}var b=c(r,2);let g;S(()=>{s=oe(t,1,Oe(a.className),null,s,{flex:!0,"items-center":!0,"b-b-solid":!0,"b-b-2":!0,"b-red-4":!0,"bg-#151515":!0,"p-2":!0}),g=M(b,g,{id:"search",...l,class:"w-full p-0"})}),Ne(b,i),p(m,t),pe()}var De=w('<div class="i-lucide:loader h-5 w-5 animate-spin"></div>'),Fe=w("<button></button>"),Re=w('<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>'),He=w('<button><span class="i-lucide:settings"></span> Config</button> <!>',1);function Ge(m,a){ve(a,!0);const[i,l]=Se(),t=()=>O(P,"$trigger",i),s=()=>O(T,"$portalled",i),r=()=>O(B,"$overlay",i),$=()=>O(C,"$content",i),b=()=>O(D,"$title",i),g=()=>O(k,"$close",i),u=()=>O(Q,"$open",i),L=d=>{try{return new URL(d),!0}catch{return!1}},{elements:{trigger:P,portalled:T,overlay:B,content:C,title:D,close:k},states:{open:Q}}=Ve({defaultOpen:y.apiKey==null,role:y.apiKey==null?"alertdialog":"dialog",escapeBehavior:y.apiKey==null?"ignore":"close",closeOnOutsideClick:y.apiKey!=null});let F=q(!1),o=q(ue(y.apiKey??"")),f=q(ue(y.host));const R=Le(async()=>{try{const d=new Ie({host:e(f),apiKey:e(o).length>0?e(o):void 0});return await Promise.all([d.getIndexes(),d.getStats(),d.getVersion()]),!0}catch{return!1}},350);de(()=>{if(e(f).length<3||!L(e(f)))return;const d=y.apiKey;I(F,!0),R().then(h=>{I(F,!1),h&&(y.host=e(f),y.apiKey=e(o),localStorage.setItem("meili_host",y.host),y.apiKey!=null&&localStorage.setItem("meili_api_key",y.apiKey),d==null&&Q.set(!1))})});var te=He(),_=W(te);let E;U(_,d=>t().action?.(d));var X=c(_,2);{var Y=d=>{var h=Re();let K;var A=v(h);let Z;U(A,n=>r().action?.(n));var H=c(A,2);let N;var ee=v(H),G=v(ee);let J;U(G,n=>b().action?.(n));var ce=c(G,2);{var fe=n=>{var x=De();be(3,x,()=>_e),p(n,x)};z(ce,n=>{e(F)&&n(fe)})}var me=c(ce,2);{var ge=n=>{var x=Fe();let ie;U(x,he=>g().action?.(he)),S(()=>ie=M(x,ie,{...g(),"aria-label":"Close config dialog",class:"i-lucide:x ml-auto cursor-pointer p-3"})),be(3,x,()=>_e),p(n,x)};z(me,n=>{y.apiKey!=null&&n(ge)})}var V=c(ee,2),ae=c(v(V));xe(ae,{id:"apiKey",icon:"key",className:"mt-1",get value(){return e(o)},set value(n){I(o,n,!0)}});var se=c(V,2),re=c(v(se));xe(re,{id:"host",icon:"url",className:"mt-1",get value(){return e(f)},set value(n){I(f,n,!0)}}),U(H,n=>$().action?.(n)),U(h,n=>s().action?.(n)),S(()=>{K=M(h,K,{...s()}),Z=M(A,Z,{...r(),class:"z-100 fixed inset-0 bg-black/50"}),N=M(H,N,{...$(),class:"z-101 w-90% max-w-400px left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black"}),J=M(G,J,{...b(),class:"m-0"})}),p(d,h)};z(X,d=>{u()&&d(Y)})}S(()=>E=M(_,E,{...t(),class:"fixed left-0 top-0 flex cursor-pointer items-center gap-1 px-4 py-3"})),p(m,te),pe(),l()}var Je=w('<div> <div></div> <span class="text-2.75 ml-auto"> </span></div>'),We=w("<div></div>"),Qe=w("<button> <span></span></button> <!>",1);function Xe(m,a){ve(a,!0);const[i,l]=Se(),t=()=>O(u,"$trigger",i),s=()=>O(L,"$menu",i),r=()=>O(T,"$open",i),$=()=>O(P,"$option",i),b=()=>O(C,"$isSelected",i);let g=Ke(a,"selected");de(()=>{g()!=null&&ke(()=>{B.set({value:g()})})});const{elements:{trigger:u,menu:L,option:P},states:{open:T,selected:B},helpers:{isSelected:C}}=Ue({forceVisible:!0,positioning:{placement:"bottom",fitViewport:!0,sameWidth:!0}});B.subscribe(_=>{_!=null&&g(_.value)});var D=Qe(),k=W(D);let Q;var F=v(k),o=c(F);let f;U(k,_=>t().action?.(_));var R=c(k,2);{var te=_=>{var E=We();let X;ne(E,21,()=>a.indexes,le,(Y,d)=>{var h=Je();const K=$e(()=>$()({value:e(d).uid}));let A;var Z=v(h),H=c(Z);let N;var ee=c(H,2),G=v(ee);U(h,J=>e(K).action?.(J)),S(J=>{A=M(h,A,{class:"data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2",...e(K)}),j(Z,`${e(d).uid??""} `),N=oe(H,1,"i-lucide:check h-5 w-5 opacity-0",null,N,J),j(G,e(d).count)},[()=>({"opacity-100":b()(e(d).uid)})]),p(Y,h)}),U(E,Y=>s().action?.(Y)),S(()=>X=M(E,X,{class:"bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0",...s()})),be(3,E,()=>_e,()=>({duration:150})),p(_,E)};z(R,_=>{r()&&_(te)})}S(_=>{Q=M(k,Q,{class:"bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3",...t(),"aria-label":"Select an index"}),j(F,`${g()??"Select an index"} `),f=oe(o,1,"i-lucide:chevron-down transition-property-transform transition",null,f,_)},[()=>({"rotate-180":r()})]),p(m,D),pe(),l()}const Ye=async(m,a,i,l)=>{if(e(a)==null)return;const t=await y.client.index(e(i)).search(e(l),{page:e(a).page+1});I(a,{...t,hits:[...e(a).hits,...t.hits]})};var Ze=w(" <br>",1),et=w(" <br>",1),tt=w('<tr class="not-last:b-b-solid b-b-1 b-b-red-4"><td class="text-3 text-gray-4 w-fit py-1.5 pl-4 text-end"> </td><td class="text-4.5 w-full select-text px-4 py-1.5 font-serif"><!></td></tr>'),at=w('<table class="not-first:mt-4 bg-#151515 rd-lg w-full"><tbody></tbody></table>'),it=w('<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>'),st=w('<div class="mt-4"><span> </span></div> <div class="pb-50px rd-lg mt-4 flex w-full flex-col items-center overflow-y-auto"><!> <!></div>',1),rt=w('<!> <main><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>â€¢</span> <span class="text-3.5"> </span></div>',1);function nt(m,a){ve(a,!0),de(()=>{window.history.pushState({},"",window.location.pathname)});let i=q("");de(()=>{e(i).length<2||e(t)==null||$(e(i))});let l=q([]),t=q(null);(async()=>{const o=await y.client.getStats();I(l,Object.entries(o.indexes).map(([f,{numberOfDocuments:R}])=>({uid:f,count:R}))),e(l).length===1&&I(t,e(l)[0].uid,!0)})();let r=q(null);const $=je(async o=>{const f=await y.client.index(e(t)).search(o,{page:1});I(r,f)},250);var b=rt(),g=W(b);Ge(g,{});var u=c(g,2);let L;var P=v(u),T=v(P);Xe(T,{get indexes(){return e(l)},get selected(){return e(t)},set selected(o){I(t,o,!0)}});var B=c(T,2);xe(B,{id:"search",icon:"search",className:"w-300px",placeholder:"Search for something...",get value(){return e(i)},set value(o){I(i,o,!0)}});var C=c(P,2);{var D=o=>{var f=st(),R=W(f),te=v(R),_=v(te),E=c(R,2),X=v(E);ne(X,17,()=>e(r).hits,le,(h,K)=>{var A=at(),Z=v(A);ne(Z,21,()=>Object.keys(e(K)),le,(H,N)=>{var ee=tt(),G=v(ee),J=v(G),ce=c(G),fe=v(ce);{var me=V=>{var ae=we(),se=W(ae);ne(se,17,()=>e(K)[e(N)].split(`
`),le,(re,n)=>{var x=Ze(),ie=W(x);S(()=>j(ie,`${e(n)??""} `)),p(re,x)}),p(V,ae)},ge=(V,ae)=>{{var se=n=>{var x=we(),ie=W(x);ne(ie,17,()=>e(K)[e(N)].split(`\r
`),le,(he,Pe)=>{var ye=et(),Te=W(ye);S(()=>j(Te,`${e(Pe)??""} `)),p(he,ye)}),p(n,x)},re=n=>{var x=Me();S(()=>j(x,e(K)[e(N)])),p(n,x)};z(V,n=>{e(K)[e(N)].includes(`\r
`)?n(se):n(re,!1)},ae)}};z(fe,V=>{e(K)[e(N)].includes(`
`)?V(me):V(ge,!1)})}S(()=>j(J,e(N))),p(H,ee)}),p(h,A)});var Y=c(X,2);{var d=h=>{var K=it();K.__click=[Ye,r,t,i],p(h,K)};z(Y,h=>{(e(r).totalPages??0)>(e(r).page??0)&&h(d)})}S(()=>j(_,`${e(r).estimatedTotalHits??e(r).totalHits??e(r).hits.length??""} hits in
        ${e(r).processingTimeMs??""}ms`)),p(o,f)};z(C,o=>{e(r)!=null&&o(D)})}var k=c(u,2),Q=c(v(k),4),F=v(Q);S((o,f)=>{L=oe(u,1,"md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition",null,L,o),j(F,f)},[()=>({"pt-50px":(e(r)?.hits.length??0)>0}),()=>"c070cfe79e25bdb02b92f003ad79fe72ad57cbe5".slice(0,7)]),p(m,b),pe()}Ee(["click"]);Ae(nt,{target:document.getElementById("root")});
