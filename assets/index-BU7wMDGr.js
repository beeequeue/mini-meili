import{s as R,p as N,b as e,c as I,e as ge,f as $e,h as y,i as Ne,j as p,k as w,l as o,m as d,n as Oe,q as A,u as V,v as Ce,x as Ke,y as ue,z as B,A as D,B as X,C as xe,D as ye,E as S,F as he,G as be,H as Ee,I as ne,J as F,K as le,L as Me,M as me,N as Ae,O as Ve}from"./svelte-BUhE_Vo7.js";import{c as ke,a as Ue}from"./melt-i9UcJUwx.js";import{m as Se}from"./meilisearch-FfvDoEWw.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();function je(v,a,{signal:s,edges:n}={}){let t,i=null;const r=n!=null&&n.includes("leading"),$=n==null||n.includes("trailing"),m=()=>{i!==null&&(v.apply(t,i),t=void 0,i=null)},O=()=>{$&&m(),C()};let g=null;const k=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,O()},a)},U=()=>{g!==null&&(clearTimeout(g),g=null)},C=()=>{U(),t=void 0,i=null},Y=()=>{U(),m()},L=function(...E){if(s?.aborted)return;t=this,i=E;const j=g==null;k(),r&&j&&m()};return L.schedule=k,L.cancel=C,L.flush=Y,s?.addEventListener("abort",C,{once:!0}),L}const Ie=(v,a,s={})=>{if(!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let n,t,i=[];return function(...r){return new Promise($=>{const m=s.before&&!t;clearTimeout(t),t=setTimeout(()=>{t=null;const O=s.before?n:v.apply(this,r);for($ of i)$(O);i=[]},a),m?(n=v.apply(this,r),$(n)):i.push($)})}};Ie.promise=v=>{let a;return async function(...s){if(a)return a;try{return a=v.apply(this,s),await a}finally{a=void 0}}};class qe{#e=R(N(new URLSearchParams(window.location.search).get("api_key")??localStorage.getItem("meili_api_key")));get apiKey(){return e(this.#e)}set apiKey(a){I(this.#e,N(a))}#t=R(N(new URLSearchParams(window.location.search).get("host")??localStorage.getItem("meili_host")??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return e(this.#t)}set host(a){I(this.#t,N(a))}#a=ge(()=>new Se.MeiliSearch({host:this.host,apiKey:this.apiKey??void 0,clientAgents:["mini-meili v?"]}));get client(){return e(this.#a)}}const x=new qe;var ze=w('<div><div class="i-lucide:search mr-1 p-3"></div> <input></div>');function _e(v,a){let s=$e(a,"value",15,""),n=Ce(a,["$$slots","$$events","$$legacy","value","className"]);var t=ze(),i=o(d(t),2);let r;y(()=>{Oe(t,a.className),A(t,"flex",!0),A(t,"items-center",!0),A(t,"b-b-solid",!0),A(t,"b-b-2",!0),A(t,"b-red-4",!0),A(t,"bg-#151515",!0),A(t,"px-2",!0),r=V(i,r,{id:"search",...n,class:"py-2"})}),Ne(i,s),p(v,t)}var Be=w('<div class="i-lucide:loader h-5 w-5 animate-spin"></div>'),De=w("<button></button>"),Fe=w('<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>'),Re=w('<button><span class="i-lucide:cog"></span> Config</button> <!>',1);function He(v,a){ye(a,!0);const s=Ke(),n=()=>S(k,"$trigger",s),t=()=>S(U,"$portalled",s),i=()=>S(C,"$overlay",s),r=()=>S(Y,"$content",s),$=()=>S(L,"$title",s),m=()=>S(E,"$close",s),O=()=>S(j,"$open",s),g=u=>{try{return new URL(u),!0}catch{return!1}},{elements:{trigger:k,portalled:U,overlay:C,content:Y,title:L,close:E},states:{open:j}}=ke({defaultOpen:x.apiKey==null,role:x.apiKey==null?"alertdialog":"dialog",escapeBehavior:x.apiKey==null?"ignore":"close",closeOnOutsideClick:x.apiKey!=null});let H=R(!1),c=R(N(x.apiKey??"")),h=R(N(x.host));const G=Ie(async()=>{try{const u=new Se.MeiliSearch({host:e(h),apiKey:e(c).length>0?e(c):void 0});return await Promise.all([u.getIndexes(),u.getStats(),u.getVersion()]),!0}catch{return!1}},350);ue(()=>{if(e(h).length<3||!g(e(h)))return;const u=e(c);I(H,!0),G().then(b=>{I(H,!1),b&&(x.host=e(h),x.apiKey=e(c),localStorage.setItem("meili_host",x.host),x.apiKey!=null&&localStorage.setItem("meili_api_key",x.apiKey),u==null&&j.set(!1))})});var K=Re(),P=B(K);let Z;D(P,u=>n().action?.(u));var J=o(P,2);{var W=u=>{var b=Fe();let _;var q=d(b);let ee;D(q,l=>i().action?.(l));var te=o(q,2);let T;var ae=d(te),Q=d(ae);let oe;D(Q,l=>$().action?.(l));var ce=o(Q,2);{var de=l=>{var f=Be();he(3,f,()=>be),p(l,f)};X(ce,l=>{e(H)&&l(de)})}var pe=o(ce,2);{var ve=l=>{var f=De();let M;D(f,fe=>m().action?.(fe)),y(()=>M=V(f,M,{...m(),"aria-label":"Close config dialog",class:"i-lucide:x ml-auto cursor-pointer p-3"})),he(3,f,()=>be),p(l,f)};X(pe,l=>{x.apiKey!=null&&l(ve)})}var z=o(ae,2),se=o(d(z));_e(se,{id:"apiKey",className:"mt-1",get value(){return e(c)},set value(l){I(c,N(l))}});var ie=o(z,2),re=o(d(ie));_e(re,{id:"host",className:"mt-1",get value(){return e(h)},set value(l){I(h,N(l))}}),D(te,l=>r().action?.(l)),D(b,l=>t().action?.(l)),y(()=>{_=V(b,_,{...t()}),ee=V(q,ee,{...i(),class:"z-100 fixed inset-0 bg-black/50"}),T=V(te,T,{...r(),class:"z-101 left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black"}),oe=V(Q,oe,{...$(),class:"m-0"})}),p(u,b)};X(J,u=>{O()&&u(W)})}y(()=>Z=V(P,Z,{...n(),class:"fixed left-0 top-0 flex items-center gap-1 px-4 py-3"})),p(v,K),xe()}var Ge=w('<div> <div class="i-lucide:check h-5 w-5 opacity-0"></div> <span class="text-2.75 ml-auto"> </span></div>'),Je=w("<div></div>"),We=w('<button> <span class="i-lucide:chevron-down transition-property-transform transition"></span></button> <!>',1);function Qe(v,a){ye(a,!0);const s=Ke(),n=()=>S(O,"$trigger",s),t=()=>S(g,"$menu",s),i=()=>S(U,"$open",s),r=()=>S(k,"$option",s),$=()=>S(Y,"$isSelected",s);let m=$e(a,"selected",15);ue(()=>{m()!=null&&Ee(()=>{C.set({value:m()})})});const{elements:{trigger:O,menu:g,option:k},states:{open:U,selected:C},helpers:{isSelected:Y}}=Ue({forceVisible:!0,positioning:{placement:"bottom",fitViewport:!0,sameWidth:!0}});C.subscribe(K=>{K!=null&&m(K.value)});var L=We(),E=B(L);let j;var H=d(E),c=o(H);D(E,K=>n().action?.(K));var h=o(E,2);{var G=K=>{var P=Je();let Z;ne(P,21,()=>a.indexes,le,(J,W)=>{var u=Ge();const b=ge(()=>r()({value:e(W).uid}));let _;var q=d(u),ee=o(q);const te=ge(()=>$()(e(W).uid));y(()=>A(ee,"opacity-100",e(te)));var T=o(ee,2),ae=d(T);D(u,Q=>e(b).action?.(Q)),y(()=>{_=V(u,_,{class:"data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2",...e(b)}),F(q,`${e(W).uid??""} `),F(ae,e(W).count)}),p(J,u)}),D(P,J=>t().action?.(J)),y(()=>Z=V(P,Z,{class:"bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0",...t()})),he(3,P,()=>be,()=>({duration:150})),p(K,P)};X(h,K=>{i()&&K(G)})}y(()=>{j=V(E,j,{class:"bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3",...n(),"aria-label":"Select an index"}),F(H,`${m()??"Select an index"??""} `),A(c,"rotate-180",i())}),p(v,L),xe()}const Xe=async(v,a,s,n)=>{if(e(a)==null)return;const t=await x.client.index(e(s)).search(e(n),{page:e(a).page+1});I(a,{...t,hits:[...e(a).hits,...t.hits]})};var Ye=w(" <br>",1),Ze=w(" <br>",1),et=w('<tr class="not-last:b-b-solid b-b-1 b-b-red-4"><td class="text-3 text-gray-4 w-fit py-1.5 pl-4 text-end"> </td><td class="text-4.5 w-full select-text px-4 py-1.5 font-serif"><!></td></tr>'),tt=w('<table class="not-first:mt-4 bg-#151515 rd-lg w-full"><tbody></tbody></table>'),at=w('<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>'),st=w('<div class="mt-4"><span> </span></div> <div class="pb-50px rd-lg mt-4 flex w-full flex-col items-center overflow-y-auto"><!> <!></div>',1),it=w('<!> <main class="md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition"><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>â€¢</span> <span class="text-3.5"> </span></div>',1);function rt(v,a){ye(a,!0),ue(()=>{window.history.pushState({},"",window.location.pathname)});let s=R("");ue(()=>{e(s).length<2||e(t)==null||$(e(s))});let n=R([]),t=R(null);(async()=>{const c=await x.client.getStats();I(n,Object.entries(c.indexes).map(([h,{numberOfDocuments:G}])=>({uid:h,count:G}))),e(n).length===1&&I(t,N(e(n)[0].uid))})();let r=R(null);const $=je(async c=>{const h=await x.client.index(e(t)).search(c,{page:1});I(r,h)},250);var m=it(),O=B(m);He(O,{});var g=o(O,2),k=d(g),U=d(k);Qe(U,{get indexes(){return e(n)},get selected(){return e(t)},set selected(c){I(t,N(c))}});var C=o(U,2);_e(C,{id:"search",className:"w-300px",placeholder:"Search for something...",get value(){return e(s)},set value(c){I(s,N(c))}});var Y=o(k,2);{var L=c=>{var h=st(),G=B(h),K=d(G),P=d(K),Z=o(G,2),J=d(Z);ne(J,17,()=>e(r).hits,le,(b,_)=>{var q=tt(),ee=d(q);ne(ee,21,()=>Object.keys(e(_)),le,(te,T)=>{var ae=et(),Q=d(ae),oe=d(Q),ce=o(Q),de=d(ce);{var pe=z=>{var se=me(),ie=B(se);ne(ie,17,()=>e(_)[e(T)].split(`
`),le,(re,l)=>{var f=Ye(),M=B(f);y(()=>F(M,`${e(l)??""} `)),p(re,f)}),p(z,se)},ve=z=>{var se=me(),ie=B(se);{var re=f=>{var M=me(),fe=B(M);ne(fe,17,()=>e(_)[e(T)].split(`\r
`),le,(Le,Pe)=>{var we=Ze(),Te=B(we);y(()=>F(Te,`${e(Pe)??""} `)),p(Le,we)}),p(f,M)},l=f=>{var M=Ae();y(()=>F(M,e(_)[e(T)])),p(f,M)};X(ie,f=>{e(_)[e(T)].includes(`\r
`)?f(re):f(l,!1)},!0)}p(z,se)};X(de,z=>{e(_)[e(T)].includes(`
`)?z(pe):z(ve,!1)})}y(()=>F(oe,e(T))),p(te,ae)}),p(b,q)});var W=o(J,2);{var u=b=>{var _=at();_.__click=[Xe,r,t,s],p(b,_)};X(W,b=>{(e(r).totalPages??0)>(e(r).page??0)&&b(u)})}y(()=>F(P,`${e(r).estimatedTotalHits??e(r).totalHits??e(r).hits.length??""} hits in
        ${e(r).processingTimeMs??""}ms`)),p(c,h)};X(Y,c=>{e(r)!=null&&c(L)})}var E=o(g,2),j=o(d(E),4),H=d(j);y(()=>F(H,"72e7ad54bbbc71d7d7ac956c29fde7921a1a8600".slice(0,7))),y(()=>A(g,"pt-50px",(e(r)?.hits.length??0)>0)),p(v,m),xe()}Me(["click"]);Ve(rt,{target:document.getElementById("root")});
