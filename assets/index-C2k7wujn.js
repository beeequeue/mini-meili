import{s as R,p as C,b as e,c as P,e as ge,f as $e,i as H,h as _,j as Ne,k as d,l as x,m as v,n as c,q as I,u as Oe,v as Ce,x as A,y as Ee,z as Ke,A as ue,B,C as D,D as xe,E as ye,F as L,G as he,H as be,I as ke,J as ne,K as F,L as le,M as Me,N as me,O as Ae,P as Ve}from"./svelte-CSmlvHz6.js";import{c as Ue,a as je}from"./melt-C8r00Nr9.js";import{m as Se}from"./meilisearch-H-Cyk5T1.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();function qe(m,a,{signal:i,edges:n}={}){let t,r=null;const s=n!=null&&n.includes("leading"),h=n==null||n.includes("trailing"),p=()=>{r!==null&&(m.apply(t,r),t=void 0,r=null)},K=()=>{h&&p(),E()};let o=null;const V=()=>{o!=null&&clearTimeout(o),o=setTimeout(()=>{o=null,K()},a)},U=()=>{o!==null&&(clearTimeout(o),o=null)},E=()=>{U(),t=void 0,r=null},Y=()=>{U(),p()},T=function(...k){if(i?.aborted)return;t=this,r=k;const j=o==null;V(),s&&j&&p()};return T.schedule=V,T.cancel=E,T.flush=Y,i?.addEventListener("abort",E,{once:!0}),T}const Ie=(m,a,i={})=>{if(!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let n,t,r=[];return function(...s){return new Promise(h=>{const p=i.before&&!t;clearTimeout(t),t=setTimeout(()=>{t=null;const K=i.before?n:m.apply(this,s);for(h of r)h(K);r=[]},a),p?(n=m.apply(this,s),h(n)):r.push(h)})}};Ie.promise=m=>{let a;return async function(...i){if(a)return a;try{return a=m.apply(this,i),await a}finally{a=void 0}}};class ze{#e=R(C(new URLSearchParams(window.location.search).get("api_key")??localStorage.getItem("meili_api_key")));get apiKey(){return e(this.#e)}set apiKey(a){P(this.#e,C(a))}#t=R(C(new URLSearchParams(window.location.search).get("host")??localStorage.getItem("meili_host")??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return e(this.#t)}set host(a){P(this.#t,C(a))}#a=ge(()=>new Se.MeiliSearch({host:this.host,apiKey:this.apiKey??void 0,clientAgents:["mini-meili v?"]}));get client(){return e(this.#a)}}const b=new ze;var Be=x('<div class="ml-0.5 mr-2 p-2.5"></div>'),De=x("<div><!> <input></div>");function _e(m,a){let i=$e(a,"value",15,""),n=Ee(a,["$$slots","$$events","$$legacy","icon","className","value"]);var t=De(),r=v(t);{var s=K=>{var o=Be();_(()=>{I(o,"i-lucide:search",a.icon==="search"),I(o,"i-lucide:key-round",a.icon==="key"),I(o,"i-lucide:globe",a.icon==="url")}),d(K,o)};H(r,K=>{a.icon!=null&&K(s)})}var h=c(r,2);let p;_(()=>{Oe(t,Ce(a.className),""),I(t,"flex",!0),I(t,"items-center",!0),I(t,"b-b-solid",!0),I(t,"b-b-2",!0),I(t,"b-red-4",!0),I(t,"bg-#151515",!0),I(t,"p-2",!0),p=A(h,p,{id:"search",...n,class:"w-full p-0"})}),Ne(h,i),d(m,t)}var Fe=x('<div class="i-lucide:loader h-5 w-5 animate-spin"></div>'),Re=x("<button></button>"),He=x('<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>'),Ge=x('<button><span class="i-lucide:settings"></span> Config</button> <!>',1);function Je(m,a){ye(a,!0);const i=Ke(),n=()=>L(V,"$trigger",i),t=()=>L(U,"$portalled",i),r=()=>L(E,"$overlay",i),s=()=>L(Y,"$content",i),h=()=>L(T,"$title",i),p=()=>L(k,"$close",i),K=()=>L(j,"$open",i),o=u=>{try{return new URL(u),!0}catch{return!1}},{elements:{trigger:V,portalled:U,overlay:E,content:Y,title:T,close:k},states:{open:j}}=Ue({defaultOpen:b.apiKey==null,role:b.apiKey==null?"alertdialog":"dialog",escapeBehavior:b.apiKey==null?"ignore":"close",closeOnOutsideClick:b.apiKey!=null});let G=R(!1),f=R(C(b.apiKey??"")),y=R(C(b.host));const J=Ie(async()=>{try{const u=new Se.MeiliSearch({host:e(y),apiKey:e(f).length>0?e(f):void 0});return await Promise.all([u.getIndexes(),u.getStats(),u.getVersion()]),!0}catch{return!1}},350);ue(()=>{if(e(y).length<3||!o(e(y)))return;const u=b.apiKey;P(G,!0),J().then(w=>{P(G,!1),w&&(b.host=e(y),b.apiKey=e(f),localStorage.setItem("meili_host",b.host),b.apiKey!=null&&localStorage.setItem("meili_api_key",b.apiKey),u==null&&j.set(!1))})});var S=Ge(),N=B(S);let Z;D(N,u=>n().action?.(u));var W=c(N,2);{var Q=u=>{var w=He();let $;var q=v(w);let ee;D(q,l=>r().action?.(l));var te=c(q,2);let O;var ae=v(te),X=v(ae);let oe;D(X,l=>h().action?.(l));var ce=c(X,2);{var de=l=>{var g=Fe();he(3,g,()=>be),d(l,g)};H(ce,l=>{e(G)&&l(de)})}var ve=c(ce,2);{var pe=l=>{var g=Re();let M;D(g,fe=>p().action?.(fe)),_(()=>M=A(g,M,{...p(),"aria-label":"Close config dialog",class:"i-lucide:x ml-auto cursor-pointer p-3"})),he(3,g,()=>be),d(l,g)};H(ve,l=>{b.apiKey!=null&&l(pe)})}var z=c(ae,2),ie=c(v(z));_e(ie,{id:"apiKey",icon:"key",className:"mt-1",get value(){return e(f)},set value(l){P(f,C(l))}});var re=c(z,2),se=c(v(re));_e(se,{id:"host",icon:"url",className:"mt-1",get value(){return e(y)},set value(l){P(y,C(l))}}),D(te,l=>s().action?.(l)),D(w,l=>t().action?.(l)),_(()=>{$=A(w,$,{...t()}),ee=A(q,ee,{...r(),class:"z-100 fixed inset-0 bg-black/50"}),O=A(te,O,{...s(),class:"z-101 w-90% max-w-400px left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black"}),oe=A(X,oe,{...h(),class:"m-0"})}),d(u,w)};H(W,u=>{K()&&u(Q)})}_(()=>Z=A(N,Z,{...n(),class:"fixed left-0 top-0 flex cursor-pointer items-center gap-1 px-4 py-3"})),d(m,S),xe()}var We=x('<div> <div class="i-lucide:check h-5 w-5 opacity-0"></div> <span class="text-2.75 ml-auto"> </span></div>'),Qe=x("<div></div>"),Xe=x('<button> <span class="i-lucide:chevron-down transition-property-transform transition"></span></button> <!>',1);function Ye(m,a){ye(a,!0);const i=Ke(),n=()=>L(K,"$trigger",i),t=()=>L(o,"$menu",i),r=()=>L(U,"$open",i),s=()=>L(V,"$option",i),h=()=>L(Y,"$isSelected",i);let p=$e(a,"selected",15);ue(()=>{p()!=null&&ke(()=>{E.set({value:p()})})});const{elements:{trigger:K,menu:o,option:V},states:{open:U,selected:E},helpers:{isSelected:Y}}=je({forceVisible:!0,positioning:{placement:"bottom",fitViewport:!0,sameWidth:!0}});E.subscribe(S=>{S!=null&&p(S.value)});var T=Xe(),k=B(T);let j;var G=v(k),f=c(G);D(k,S=>n().action?.(S));var y=c(k,2);{var J=S=>{var N=Qe();let Z;ne(N,21,()=>a.indexes,le,(W,Q)=>{var u=We();const w=ge(()=>s()({value:e(Q).uid}));let $;var q=v(u),ee=c(q);const te=ge(()=>h()(e(Q).uid));_(()=>I(ee,"opacity-100",e(te)));var O=c(ee,2),ae=v(O);D(u,X=>e(w).action?.(X)),_(()=>{$=A(u,$,{class:"data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2",...e(w)}),F(q,`${e(Q).uid??""} `),F(ae,e(Q).count)}),d(W,u)}),D(N,W=>t().action?.(W)),_(()=>Z=A(N,Z,{class:"bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0",...t()})),he(3,N,()=>be,()=>({duration:150})),d(S,N)};H(y,S=>{r()&&S(J)})}_(()=>{j=A(k,j,{class:"bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3",...n(),"aria-label":"Select an index"}),F(G,`${p()??"Select an index"??""} `),I(f,"rotate-180",r())}),d(m,T),xe()}const Ze=async(m,a,i,n)=>{if(e(a)==null)return;const t=await b.client.index(e(i)).search(e(n),{page:e(a).page+1});P(a,{...t,hits:[...e(a).hits,...t.hits]})};var et=x(" <br>",1),tt=x(" <br>",1),at=x('<tr class="not-last:b-b-solid b-b-1 b-b-red-4"><td class="text-3 text-gray-4 w-fit py-1.5 pl-4 text-end"> </td><td class="text-4.5 w-full select-text px-4 py-1.5 font-serif"><!></td></tr>'),it=x('<table class="not-first:mt-4 bg-#151515 rd-lg w-full"><tbody></tbody></table>'),rt=x('<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>'),st=x('<div class="mt-4"><span> </span></div> <div class="pb-50px rd-lg mt-4 flex w-full flex-col items-center overflow-y-auto"><!> <!></div>',1),nt=x('<!> <main class="md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition"><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>â€¢</span> <span class="text-3.5"> </span></div>',1);function lt(m,a){ye(a,!0),ue(()=>{window.history.pushState({},"",window.location.pathname)});let i=R("");ue(()=>{e(i).length<2||e(t)==null||h(e(i))});let n=R([]),t=R(null);(async()=>{const f=await b.client.getStats();P(n,Object.entries(f.indexes).map(([y,{numberOfDocuments:J}])=>({uid:y,count:J}))),e(n).length===1&&P(t,C(e(n)[0].uid))})();let s=R(null);const h=qe(async f=>{const y=await b.client.index(e(t)).search(f,{page:1});P(s,y)},250);var p=nt(),K=B(p);Je(K,{});var o=c(K,2),V=v(o),U=v(V);Ye(U,{get indexes(){return e(n)},get selected(){return e(t)},set selected(f){P(t,C(f))}});var E=c(U,2);_e(E,{id:"search",icon:"search",className:"w-300px",placeholder:"Search for something...",get value(){return e(i)},set value(f){P(i,C(f))}});var Y=c(V,2);{var T=f=>{var y=st(),J=B(y),S=v(J),N=v(S),Z=c(J,2),W=v(Z);ne(W,17,()=>e(s).hits,le,(w,$)=>{var q=it(),ee=v(q);ne(ee,21,()=>Object.keys(e($)),le,(te,O)=>{var ae=at(),X=v(ae),oe=v(X),ce=c(X),de=v(ce);{var ve=z=>{var ie=me(),re=B(ie);ne(re,17,()=>e($)[e(O)].split(`
`),le,(se,l)=>{var g=et(),M=B(g);_(()=>F(M,`${e(l)??""} `)),d(se,g)}),d(z,ie)},pe=z=>{var ie=me(),re=B(ie);{var se=g=>{var M=me(),fe=B(M);ne(fe,17,()=>e($)[e(O)].split(`\r
`),le,(Le,Pe)=>{var we=tt(),Te=B(we);_(()=>F(Te,`${e(Pe)??""} `)),d(Le,we)}),d(g,M)},l=g=>{var M=Ae();_(()=>F(M,e($)[e(O)])),d(g,M)};H(re,g=>{e($)[e(O)].includes(`\r
`)?g(se):g(l,!1)},!0)}d(z,ie)};H(de,z=>{e($)[e(O)].includes(`
`)?z(ve):z(pe,!1)})}_(()=>F(oe,e(O))),d(te,ae)}),d(w,q)});var Q=c(W,2);{var u=w=>{var $=rt();$.__click=[Ze,s,t,i],d(w,$)};H(Q,w=>{(e(s).totalPages??0)>(e(s).page??0)&&w(u)})}_(()=>F(N,`${e(s).estimatedTotalHits??e(s).totalHits??e(s).hits.length??""} hits in
        ${e(s).processingTimeMs??""}ms`)),d(f,y)};H(Y,f=>{e(s)!=null&&f(T)})}var k=c(o,2),j=c(v(k),4),G=v(j);_(()=>F(G,"36af7283e7aece7804e3ff8cb5d13ba913d6d603".slice(0,7))),_(()=>I(o,"pt-50px",(e(s)?.hits.length??0)>0)),d(m,p),xe()}Me(["click"]);Ve(lt,{target:document.getElementById("root")});
