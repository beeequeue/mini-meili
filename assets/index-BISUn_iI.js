import{s as j,p as P,b as t,c as $,e as re,f as me,h as K,i as Se,j as y,k as x,l,m as u,n as Ie,q as k,u as C,v as Le,x as ge,y as ae,z as ie,A as U,B as Z,C as de,D as pe,E as w,F as ne,G as le,H as Pe,I as oe,J as Y,K as ce,L as Te,M as Ne}from"./svelte-CfnTyYTQ.js";import{c as Oe,a as ke}from"./melt-fZhddGwx.js";import{m as he}from"./meilisearch-FfvDoEWw.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();function Ce(p,a,{signal:i,edges:n}={}){let e,s=null;const r=n!=null&&n.includes("leading"),b=n==null||n.includes("trailing"),v=()=>{s!==null&&(p.apply(e,s),e=void 0,s=null)},T=()=>{b&&v(),N()};let f=null;const E=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,T()},a)},M=()=>{f!==null&&(clearTimeout(f),f=null)},N=()=>{M(),e=void 0,s=null},R=()=>{M(),v()},S=function(...O){if(i?.aborted)return;e=this,s=O;const A=f==null;E(),r&&A&&v()};return S.schedule=E,S.cancel=N,S.flush=R,i?.addEventListener("abort",N,{once:!0}),S}const be=(p,a,i={})=>{if(!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let n,e,s=[];return function(...r){return new Promise(b=>{const v=i.before&&!e;clearTimeout(e),e=setTimeout(()=>{e=null;const T=i.before?n:p.apply(this,r);for(b of s)b(T);s=[]},a),v?(n=p.apply(this,r),b(n)):s.push(b)})}};be.promise=p=>{let a;return async function(...i){if(a)return a;try{return a=p.apply(this,i),await a}finally{a=void 0}}};class Ee{#e=j(P(new URLSearchParams(window.location.search).get("api_key")??localStorage.getItem("meili_api_key")));get apiKey(){return t(this.#e)}set apiKey(a){$(this.#e,P(a))}#t=j(P(new URLSearchParams(window.location.search).get("host")??localStorage.getItem("meili_host")??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return t(this.#t)}set host(a){$(this.#t,P(a))}#a=re(()=>new he.MeiliSearch({host:this.host,apiKey:this.apiKey??void 0,clientAgents:["mini-meili v?"]}));get client(){return t(this.#a)}}const h=new Ee;var Me=x('<div><div class="i-lucide:search mr-1 p-3"></div> <input></div>');function ue(p,a){let i=me(a,"value",15,""),n=Le(a,["$$slots","$$events","$$legacy","value","className"]);var e=Me(),s=l(u(e),2);let r;K(()=>{Ie(e,a.className),k(e,"flex",!0),k(e,"items-center",!0),k(e,"b-b-solid",!0),k(e,"b-b-2",!0),k(e,"b-red-4",!0),k(e,"bg-#151515",!0),k(e,"px-2",!0),r=C(s,r,{id:"search",...n,class:"py-2"})}),Se(s,i),y(p,e)}var Ae=x('<div class="i-lucide:loader h-5 w-5 animate-spin"></div>'),Ve=x("<button></button>"),Ue=x('<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>'),je=x('<button><span class="i-lucide:cog"></span> Config</button> <!>',1);function qe(p,a){pe(a,!0);const i=ge(),n=()=>w(E,"$trigger",i),e=()=>w(M,"$portalled",i),s=()=>w(N,"$overlay",i),r=()=>w(R,"$content",i),b=()=>w(S,"$title",i),v=()=>w(O,"$close",i),T=()=>w(A,"$open",i),f=c=>{try{return new URL(c),!0}catch{return!1}},{elements:{trigger:E,portalled:M,overlay:N,content:R,title:S,close:O},states:{open:A}}=Oe({defaultOpen:h.apiKey==null,role:h.apiKey==null?"alertdialog":"dialog",escapeBehavior:h.apiKey==null?"ignore":"close",closeOnOutsideClick:h.apiKey!=null});let q=j(!1),o=j(P(h.apiKey??"")),m=j(P(h.host));const z=be(async()=>{try{const c=new he.MeiliSearch({host:t(m),apiKey:t(o).length>0?t(o):void 0});return await Promise.all([c.getIndexes(),c.getStats(),c.getVersion()]),!0}catch{return!1}},350);ae(()=>{if(t(m).length<3||!f(t(m)))return;const c=t(o);$(q,!0),z().then(g=>{$(q,!1),g&&(h.host=t(m),h.apiKey=t(o),localStorage.setItem("meili_host",h.host),h.apiKey!=null&&localStorage.setItem("meili_api_key",h.apiKey),c==null&&A.set(!1))})});var _=je(),I=ie(_);let H;U(I,c=>n().action?.(c));var B=l(I,2);{var D=c=>{var g=Ue();let L;var V=u(g);let G;U(V,d=>s().action?.(d));var J=l(V,2);let W;var Q=u(J),F=u(Q);let ee;U(F,d=>b().action?.(d));var te=l(F,2);{var se=d=>{var X=Ae();ne(3,X,()=>le),y(d,X)};Z(te,d=>{t(q)&&d(se)})}var _e=l(te,2);{var ye=d=>{var X=Ve();let fe;U(X,Ke=>v().action?.(Ke)),K(()=>fe=C(X,fe,{...v(),"aria-label":"Close config dialog",class:"i-lucide:x ml-auto cursor-pointer p-3"})),ne(3,X,()=>le),y(d,X)};Z(_e,d=>{h.apiKey!=null&&d(ye)})}var ve=l(Q,2),xe=l(u(ve));ue(xe,{id:"apiKey",className:"mt-1",get value(){return t(o)},set value(d){$(o,P(d))}});var we=l(ve,2),$e=l(u(we));ue($e,{id:"host",className:"mt-1",get value(){return t(m)},set value(d){$(m,P(d))}}),U(J,d=>r().action?.(d)),U(g,d=>e().action?.(d)),K(()=>{L=C(g,L,{...e()}),G=C(V,G,{...s(),class:"z-100 fixed inset-0 bg-black/50"}),W=C(J,W,{...r(),class:"z-101 left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black"}),ee=C(F,ee,{...b(),class:"m-0"})}),y(c,g)};Z(B,c=>{T()&&c(D)})}K(()=>H=C(I,H,{...n(),class:"fixed left-0 top-0 flex items-center gap-1 px-4 py-3"})),y(p,_),de()}var ze=x('<div> <div class="i-lucide:check h-5 w-5 opacity-0"></div> <span class="text-2.75 ml-auto"> </span></div>'),Be=x("<div></div>"),De=x('<button> <span class="i-lucide:chevron-down transition-property-transform transition"></span></button> <!>',1);function Fe(p,a){pe(a,!0);const i=ge(),n=()=>w(T,"$trigger",i),e=()=>w(f,"$menu",i),s=()=>w(M,"$open",i),r=()=>w(E,"$option",i),b=()=>w(R,"$isSelected",i);let v=me(a,"selected",15);ae(()=>{v()!=null&&Pe(()=>{N.set({value:v()})})});const{elements:{trigger:T,menu:f,option:E},states:{open:M,selected:N},helpers:{isSelected:R}}=ke({forceVisible:!0,positioning:{placement:"bottom",fitViewport:!0,sameWidth:!0}});N.subscribe(_=>{_!=null&&v(_.value)});var S=De(),O=ie(S);let A;var q=u(O),o=l(q);U(O,_=>n().action?.(_));var m=l(O,2);{var z=_=>{var I=Be();let H;oe(I,21,()=>a.indexes,ce,(B,D)=>{var c=ze();const g=re(()=>r()({value:t(D).uid}));let L;var V=u(c),G=l(V);const J=re(()=>b()(t(D).uid));K(()=>k(G,"opacity-100",t(J)));var W=l(G,2),Q=u(W);U(c,F=>t(g).action?.(F)),K(()=>{L=C(c,L,{class:"data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2",...t(g)}),Y(V,`${t(D).uid??""} `),Y(Q,t(D).count)}),y(B,c)}),U(I,B=>e().action?.(B)),K(()=>H=C(I,H,{class:"bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0",...e()})),ne(3,I,()=>le,()=>({duration:150})),y(_,I)};Z(m,_=>{s()&&_(z)})}K(()=>{A=C(O,A,{class:"bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3",...n(),"aria-label":"Select an index"}),Y(q,`${v()??"Select an index"??""} `),k(o,"rotate-180",s())}),y(p,S),de()}const Re=async(p,a,i,n)=>{if(t(a)==null)return;const e=await h.client.index(t(i)).search(t(n),{page:t(a).page+1});$(a,{...e,hits:[...t(a).hits,...e.hits]})};var He=x('<tr class="not-last:b-b-solid b-b-1 b-b-red-4"><td class="text-3 text-gray-4 w-fit py-1.5 pl-4 text-end"> </td><td class="text-4.5 w-full px-4 py-1.5 font-serif"> </td></tr>'),Ge=x('<table class="not-first:mt-4 bg-#151515 rd-lg w-full"><tbody></tbody></table>'),Je=x('<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>'),We=x('<div class="mt-4"><span> </span></div> <div class="pb-50px rd-lg mt-4 flex w-full flex-col items-center overflow-y-auto"><!> <!></div>',1),Qe=x('<!> <main class="md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition"><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>â€¢</span> <span class="text-3.5"> </span></div>',1);function Xe(p,a){pe(a,!0),ae(()=>{window.history.pushState({},"",window.location.pathname)});let i=j("");ae(()=>{t(i).length<2||t(e)==null||b(t(i))});let n=j([]),e=j(null);(async()=>{const o=await h.client.getStats();$(n,Object.entries(o.indexes).map(([m,{numberOfDocuments:z}])=>({uid:m,count:z}))),t(n).length===1&&$(e,P(t(n)[0].uid))})();let r=j(null);const b=Ce(async o=>{const m=await h.client.index(t(e)).search(o,{page:1});$(r,m)},250);var v=Qe(),T=ie(v);qe(T,{});var f=l(T,2),E=u(f),M=u(E);Fe(M,{get indexes(){return t(n)},get selected(){return t(e)},set selected(o){$(e,P(o))}});var N=l(M,2);ue(N,{id:"search",className:"w-300px",placeholder:"Search for something...",get value(){return t(i)},set value(o){$(i,P(o))}});var R=l(E,2);{var S=o=>{var m=We(),z=ie(m),_=u(z),I=u(_),H=l(z,2),B=u(H);oe(B,17,()=>t(r).hits,ce,(g,L)=>{var V=Ge(),G=u(V);oe(G,21,()=>Object.keys(t(L)),ce,(J,W)=>{var Q=He(),F=u(Q),ee=u(F),te=l(F),se=u(te);K(()=>{Y(ee,t(W)),Y(se,t(L)[t(W)])}),y(J,Q)}),y(g,V)});var D=l(B,2);{var c=g=>{var L=Je();L.__click=[Re,r,e,i],y(g,L)};Z(D,g=>{(t(r).totalPages??0)>(t(r).page??0)&&g(c)})}K(()=>Y(I,`${t(r).estimatedTotalHits??t(r).totalHits??t(r).hits.length??""} hits in
        ${t(r).processingTimeMs??""}ms`)),y(o,m)};Z(R,o=>{t(r)!=null&&o(S)})}var O=l(f,2),A=l(u(O),4),q=u(A);K(()=>Y(q,"b7376ecbcae7139b5ee100fabf8a398b48b3fd48".slice(0,7))),K(()=>k(f,"pt-50px",(t(r)?.hits.length??0)>0)),y(p,v),de()}Te(["click"]);Ne(Xe,{target:document.getElementById("root")});
