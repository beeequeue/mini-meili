import{A as e,B as t,C as n,D as r,E as i,F as a,G as o,H as s,I as c,K as l,L as u,M as d,N as f,O as p,P as m,R as h,S as g,T as _,U as v,V as y,W as b,_ as x,a as S,b as C,f as w,g as T,h as E,i as D,k as O,m as k,o as A,p as j,r as M,t as N,v as P,w as F,x as I,y as L,z as R}from"./svelte-DJpadMKT.js";import{n as z,t as B}from"./melt-B8XeMTG7.js";import{t as V}from"./meilisearch-ILZTom-M.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function H(e,t,{signal:n,edges:r}={}){let i,a=null,o=r!=null&&r.includes(`leading`),s=r==null||r.includes(`trailing`),c=()=>{a!==null&&(e.apply(i,a),i=void 0,a=null)},l=()=>{s&&c(),p()},u=null,d=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,l()},t)},f=()=>{u!==null&&(clearTimeout(u),u=null)},p=()=>{f(),i=void 0,a=null},m=()=>{c()},h=function(...e){if(n?.aborted)return;i=this,a=e;let t=u==null;d(),o&&t&&c()};return h.schedule=d,h.cancel=p,h.flush=m,n?.addEventListener(`abort`,p,{once:!0}),h}var U=(e,t,n={})=>{if(!Number.isFinite(t))throw TypeError("Expected `wait` to be a finite number");let r,i,a=[];return function(...o){return new Promise(s=>{let c=n.before&&!i;clearTimeout(i),i=setTimeout(()=>{i=null;let t=n.before?r:e.apply(this,o);for(s of a)s(t);a=[]},t),c?(r=e.apply(this,o),s(r)):a.push(s)})}};U.promise=e=>{let t;return async function(...n){if(t)return t;try{return t=e.apply(this,n),await t}finally{t=void 0}}};var W=U;const G=new class{#e=t(h(new URLSearchParams(window.location.search).get(`api_key`)??localStorage.getItem(`meili_api_key`)));get apiKey(){return e(this.#e)}set apiKey(e){R(this.#e,e,!0)}#t=t(h(new URLSearchParams(window.location.search).get(`host`)??localStorage.getItem(`meili_host`)??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return e(this.#t)}set host(e){R(this.#t,e,!0)}#n=y(()=>new V({host:this.host,apiKey:this.apiKey??void 0,clientAgents:[`mini-meili v?`]}));get client(){return e(this.#n)}set client(e){R(this.#n,e)}};var K=i(`<div></div>`),q=i(`<div><!> <input/></div>`);function J(e,t){v(t,!0);let n=M(t,`value`,15,``),r=D(t,[`$$slots`,`$$events`,`$$legacy`,`icon`,`className`,`value`]);var i=q();let c;var l=a(i),d=e=>{var n=K();let r;f(()=>r=E(n,1,`ml-0.5 mr-2 p-2.5`,null,r,{"i-lucide:search":t.icon===`search`,"i-lucide:key-round":t.icon===`key`,"i-lucide:globe":t.icon===`url`})),F(e,n)};I(l,e=>{t.icon!=null&&e(d)});var p=u(l,2);j(p,()=>({id:`search`,...r,class:`w-full p-0`}),void 0,void 0,void 0,void 0,!0),o(i),f(()=>c=E(i,1,T(t.className),null,c,{flex:!0,"items-center":!0,"b-b-solid":!0,"b-b-2":!0,"b-red-4":!0,"bg-#151515":!0,"p-2":!0})),w(p,n),F(e,i),s()}var Y=i(`<div class="i-lucide:loader h-5 w-5 animate-spin"></div>`),X=i(`<button></button>`),ee=i(`<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>`),te=i(`<button><span class="i-lucide:settings"></span> Config</button> <!>`,1);function Z(n,r){v(r,!0);let i=()=>A(w,`$trigger`,y),l=()=>A(T,`$portalled`,y),d=()=>A(E,`$overlay`,y),f=()=>A(D,`$content`,y),p=()=>A(O,`$title`,y),g=()=>A(k,`$close`,y),_=()=>A(M,`$open`,y),[y,b]=S(),C=e=>{try{return new URL(e),!0}catch{return!1}},{elements:{trigger:w,portalled:T,overlay:E,content:D,title:O,close:k},states:{open:M}}=z({defaultOpen:G.apiKey==null,role:G.apiKey==null?`alertdialog`:`dialog`,escapeBehavior:G.apiKey==null?`ignore`:`close`,closeOnOutsideClick:G.apiKey!=null}),L=t(!1),B=t(h(G.apiKey??``)),H=t(h(G.host)),U=W(async()=>{try{let t=new V({host:e(H),apiKey:e(B).length>0?e(B):void 0});return await Promise.all([t.getIndexes(),t.getStats(),t.getVersion()]),!0}catch{return!1}},350);m(()=>{if(e(H).length<3||!C(e(H)))return;let t=G.apiKey;R(L,!0),U().then(n=>{R(L,!1),n&&(G.host=e(H),G.apiKey=e(B),localStorage.setItem(`meili_host`,G.host),G.apiKey!=null&&localStorage.setItem(`meili_api_key`,G.apiKey),t??M.set(!1))})});var K=te(),q=c(K);j(q,()=>({...i(),class:`fixed left-0 top-0 flex cursor-pointer items-center gap-1 px-4 py-3`})),x(q,e=>i().action?.(e));var Z=u(q,2),Q=t=>{var n=ee();j(n,()=>({...l()}));var r=a(n);j(r,()=>({...d(),class:`z-100 fixed inset-0 bg-black/50`})),x(r,e=>d().action?.(e));var i=u(r,2);j(i,()=>({...f(),class:`z-101 w-90% max-w-400px left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black`}));var s=a(i),c=a(s);j(c,()=>({...p(),class:`m-0`})),x(c,e=>p().action?.(e));var m=u(c,2),h=e=>{var t=Y();P(3,t,()=>N),F(e,t)};I(m,t=>{e(L)&&t(h)});var _=u(m,2),v=e=>{var t=X();j(t,()=>({...g(),"aria-label":`Close config dialog`,class:`i-lucide:x ml-auto cursor-pointer p-3`})),x(t,e=>g().action?.(e)),P(3,t,()=>N),F(e,t)};I(_,e=>{G.apiKey!=null&&e(v)}),o(s);var y=u(s,2);J(u(a(y)),{id:`apiKey`,icon:`key`,className:`mt-1`,get value(){return e(B)},set value(e){R(B,e,!0)}}),o(y);var b=u(y,2);J(u(a(b)),{id:`host`,icon:`url`,className:`mt-1`,get value(){return e(H)},set value(e){R(H,e,!0)}}),o(b),o(i),x(i,e=>f().action?.(e)),o(n),x(n,e=>l().action?.(e)),F(t,n)};I(Z,e=>{_()&&e(Q)}),F(n,K),s(),b()}var Q=i(`<div> <div></div> <span class="text-2.75 ml-auto"> </span></div>`),ne=i(`<div></div>`),re=i(`<button> <span></span></button> <!>`,1);function ie(t,r){v(r,!0);let i=()=>A(T,`$trigger`,_),l=()=>A(D,`$menu`,_),p=()=>A(k,`$open`,_),h=()=>A(O,`$option`,_),g=()=>A(z,`$isSelected`,_),[_,b]=S(),w=M(r,`selected`,15);m(()=>{w()!=null&&d(()=>{R.set({value:w()})})});let{elements:{trigger:T,menu:D,option:O},states:{open:k,selected:R},helpers:{isSelected:z}}=B({forceVisible:!0,positioning:{placement:`bottom`,fitViewport:!0,sameWidth:!0}});R.subscribe(e=>{e!=null&&w(e.value)});var V=re(),H=c(V);j(H,()=>({class:`bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3`,...i(),"aria-label":`Select an index`}));var U=a(H),W=u(U);let G;o(H),x(H,e=>i().action?.(e));var K=u(H,2),q=t=>{var i=ne();j(i,()=>({class:`bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0`,...l()})),L(i,21,()=>r.indexes,C,(t,r)=>{let i=y(()=>h()({value:e(r).uid}));var s=Q();j(s,()=>({class:`data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2`,...e(i)}));var c=a(s),l=u(c);let d;var p=u(l,2),m=a(p,!0);o(p),o(s),x(s,t=>e(i).action?.(t)),f(t=>{n(c,`${e(r).uid??``} `),d=E(l,1,`i-lucide:check h-5 w-5 opacity-0`,null,d,t),n(m,e(r).count)},[()=>({"opacity-100":g()(e(r).uid)})]),F(t,s)}),o(i),x(i,e=>l().action?.(e)),P(3,i,()=>N,()=>({duration:150})),F(t,i)};I(K,e=>{p()&&e(q)}),f(()=>{n(U,`${w()??`Select an index`??``} `),G=E(W,1,`i-lucide:chevron-down transition-property-transform transition`,null,G,{"rotate-180":p()})}),F(t,V),s(),b()}var ae=i(`<span class="uno-css-kxznfu"> </span> <!>`,1),oe=i(`<div class="text-3.5"></div>`),se=i(`<a target="_blank" rel="noopener" class="line-clamp-3 flex items-center gap-2 text-sm"><img class="max-h-16 max-w-96 object-contain"/> <!></a>`),ce=i(`<a target="_blank" rel="noopener"> </a>`),le=i(` <br/>`,1),ue=i(` <br/>`,1),de=i(`<td><!></td>`);function $(t,i){v(i,!0);let d=new Set([`png`,`jpg`,`jpeg`,`gif`,`webp`,`svg`]),p=y(()=>typeof i.value==`string`&&i.value?.startsWith(`https://`)),m=y(()=>e(p)?i.value.slice(i.value.lastIndexOf(`.`)):null),h=y(()=>e(p)&&d.has(e(m)));var g=de(),x=a(g),S=e=>{var t=r();f(()=>n(t,i.value===null?`null`:`undefined`)),F(e,t)},w=e=>{var t=r();f(e=>n(t,e),[()=>i.value.join(`, `)]),F(e,t)},D=y(()=>Array.isArray(i.value)),O=t=>{var r=oe();L(r,21,()=>Object.entries(i.value).filter(([e])=>e!==`id`),C,(t,r,i,s)=>{var d=y(()=>l(e(r),2));let p=()=>e(d)[0],m=()=>e(d)[1];var h=ae(),g=c(h),_=a(g);o(g),$(u(g,2),{get key(){return p()},get value(){return m()},class:`uno-css-vq2t6k`}),f(()=>n(_,`${p()??``}:`)),F(t,h)}),o(r),F(t,r)},A=e=>{var t=r();f(e=>n(t,e),[()=>i.value.toString()]),F(e,t)},j=t=>{var s=_(),l=c(s),d=t=>{var s=se(),c=a(s),l=u(c,2),d=e=>{var t=r();f(()=>n(t,i.value)),F(e,t)};I(l,t=>{e(p)&&t(d)}),o(s),f(()=>{k(s,`href`,i.value),k(c,`src`,i.value),k(c,`alt`,i.key)}),F(t,s)},m=y(()=>i.value.startsWith(`data:image/`)||e(p)&&(e(h)||i.key.toLowerCase().includes(`image`))),g=e=>{var t=ce(),r=a(t,!0);o(t),f(()=>{k(t,`href`,i.value),n(r,i.value)}),F(e,t)},v=t=>{var r=_();L(c(r),17,()=>i.value.split(`
`),C,(t,r)=>{b();var i=le(),a=c(i);b(),f(()=>n(a,`${e(r)??``} `)),F(t,i)}),F(t,r)},x=y(()=>i.value.includes?.(`
`)),S=t=>{var r=_();L(c(r),17,()=>i.value.split(`\r
`),C,(t,r)=>{b();var i=ue(),a=c(i);b(),f(()=>n(a,`${e(r)??``} `)),F(t,i)}),F(t,r)},w=y(()=>i.value.includes?.(`\r
`)),T=e=>{var t=r();f(()=>n(t,i.value)),F(e,t)};I(l,t=>{e(m)?t(d):e(p)&&!e(h)?t(g,1):e(x)?t(v,2):e(w)?t(S,3):t(T,!1)}),F(t,s)};I(x,t=>{i.value===null||i.value===void 0?t(S):e(D)?t(w,1):typeof i.value==`object`?t(O,2):typeof i.value==`boolean`||typeof i.value==`number`?t(A,3):typeof i.value==`string`&&t(j,4)}),o(g),f(()=>E(g,1,T([`uno-css-ushu4l`,i.class]))),F(t,g),s()}var fe=i(`<tr class="uno-534ysd"><td class="uno-reutmv"> </td><!></tr>`),pe=i(`<table class="uno-rxr413"><tbody></tbody></table>`),me=i(`<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>`),he=i(`<div class="mt-4"><span> </span></div> <div class="uno-u29eo3"><!> <!></div>`,1),ge=i(`<!> <main><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>â€¢</span> <span class="text-3.5"> </span></div>`,1);function _e(r,i){v(i,!0),m(()=>{window.history.pushState({},``,window.location.pathname)});let l=t(``);m(()=>{e(l).length<2||e(p)==null||_(e(l))});let d=t([]),p=t(null);(async()=>{let t=await G.client.getStats();R(d,Object.entries(t.indexes).map(([e,{numberOfDocuments:t}])=>({uid:e,count:t}))),e(d).length===1&&R(p,e(d)[0].uid,!0)})();let h=t(null),g=y(()=>(e(h)?.hits.length??0)!==0),_=H(async t=>{R(h,await G.client.index(e(p)).search(t,{page:1}))},250),b=async()=>{if(e(h)==null)return;let t=await G.client.index(e(p)).search(e(l),{page:e(h).page+1});R(h,{...t,hits:[...e(h).hits,...t.hits]})};var x=ge(),S=c(x);Z(S,{});var w=u(S,2);let T;var D=a(w),k=a(D);ie(k,{get indexes(){return e(d)},get selected(){return e(p)},set selected(e){R(p,e,!0)}}),J(u(k,2),{id:`search`,icon:`search`,className:`w-300px`,placeholder:`Search for something...`,get value(){return e(l)},set value(e){R(l,e,!0)}}),o(D);var A=u(D,2),j=t=>{var r=he(),i=c(r),s=a(i),l=a(s);o(s),o(i);var d=u(i,2),p=a(d);L(p,17,()=>e(h).hits,C,(t,r)=>{var i=pe(),s=a(i);L(s,21,()=>Object.keys(e(r)),C,(t,i)=>{var s=fe(),c=a(s),l=a(c,!0);o(c),$(u(c),{get key(){return e(i)},get value(){return e(r)[e(i)]}}),o(s),f(()=>n(l,e(i))),F(t,s)}),o(s),o(i),F(t,i)});var m=u(p,2),g=e=>{var t=me();O(`click`,t,b),F(e,t)};I(m,t=>{(e(h).totalPages??0)>(e(h).page??0)&&t(g)}),o(d),f(()=>n(l,`${e(h).estimatedTotalHits??e(h).totalHits??e(h).hits.length??``} hits in
        ${e(h).processingTimeMs??``}ms`)),F(t,r)};I(A,t=>{e(h)!=null&&t(j)}),o(w);var M=u(w,2),N=u(a(M),4),P=a(N,!0);o(N),o(M),f(()=>{T=E(w,1,`md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition`,null,T,{"pt-50px":e(g)}),n(P,`dacf241`)}),F(r,x),s()}p([`click`]),g(_e,{target:document.getElementById(`root`)});