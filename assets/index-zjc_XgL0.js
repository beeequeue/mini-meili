import{s as B,p as O,b as e,c as T,e as $e,f as Ke,i as D,h as $,j as Ne,k as v,l as x,m as p,n as u,q as I,u as Oe,v as Ce,x as E,y as ke,z as ve,A as j,B as q,C as xe,D as ye,E as Se,F as P,G as he,H as be,I as Ee,J as le,K as z,L as oe,M as Me,N as ge,O as Ae,P as Ve}from"./svelte-BCE_CdVd.js";import{c as Ue,a as je}from"./melt-CddkI9Fq.js";import{M as Ie}from"./meilisearch-Cnsq5e9M.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();function qe(g,a,{signal:i,edges:l}={}){let t,r=null;const n=l!=null&&l.includes("leading"),h=l==null||l.includes("trailing"),b=()=>{r!==null&&(g.apply(t,r),t=void 0,r=null)},m=()=>{h&&b(),V()};let c=null;const M=()=>{c!=null&&clearTimeout(c),c=setTimeout(()=>{c=null,m()},a)},A=()=>{c!==null&&(clearTimeout(c),c=null)},V=()=>{A(),t=void 0,r=null},F=()=>{A(),b()},C=function(...R){if(i?.aborted)return;t=this,r=R;const k=c==null;M(),n&&k&&b()};return C.schedule=M,C.cancel=V,C.flush=F,i?.addEventListener("abort",V,{once:!0}),C}const Le=(g,a,i={})=>{if(!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let l,t,r=[];return function(...n){return new Promise(h=>{const b=i.before&&!t;clearTimeout(t),t=setTimeout(()=>{t=null;const m=i.before?l:g.apply(this,n);for(h of r)h(m);r=[]},a),b?(l=g.apply(this,n),h(l)):r.push(h)})}};Le.promise=g=>{let a;return async function(...i){if(a)return a;try{return a=g.apply(this,i),await a}finally{a=void 0}}};class ze{#e=B(O(new URLSearchParams(window.location.search).get("api_key")??localStorage.getItem("meili_api_key")));get apiKey(){return e(this.#e)}set apiKey(a){T(this.#e,O(a))}#t=B(O(new URLSearchParams(window.location.search).get("host")??localStorage.getItem("meili_host")??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return e(this.#t)}set host(a){T(this.#t,O(a))}#a=$e(()=>new Ie({host:this.host,apiKey:this.apiKey??void 0,clientAgents:["mini-meili v?"]}));get client(){return e(this.#a)}}const _=new ze;var Be=x('<div class="ml-0.5 mr-2 p-2.5"></div>'),De=x("<div><!> <input></div>");function _e(g,a){let i=Ke(a,"value",15,""),l=ke(a,["$$slots","$$events","$$legacy","icon","className","value"]);var t=De(),r=p(t);{var n=m=>{var c=Be();$(()=>{I(c,"i-lucide:search",a.icon==="search"),I(c,"i-lucide:key-round",a.icon==="key"),I(c,"i-lucide:globe",a.icon==="url")}),v(m,c)};D(r,m=>{a.icon!=null&&m(n)})}var h=u(r,2);let b;$(()=>{Oe(t,Ce(a.className)),I(t,"flex",!0),I(t,"items-center",!0),I(t,"b-b-solid",!0),I(t,"b-b-2",!0),I(t,"b-red-4",!0),I(t,"bg-#151515",!0),I(t,"p-2",!0),b=E(h,b,{id:"search",...l,class:"w-full p-0"})}),Ne(h,i),v(g,t)}var Fe=x('<div class="i-lucide:loader h-5 w-5 animate-spin"></div>'),Re=x("<button></button>"),He=x('<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>'),Ge=x('<button><span class="i-lucide:settings"></span> Config</button> <!>',1);function Je(g,a){ye(a,!0);const[i,l]=Se(),t=()=>P(A,"$trigger",i),r=()=>P(V,"$portalled",i),n=()=>P(F,"$overlay",i),h=()=>P(C,"$content",i),b=()=>P(R,"$title",i),m=()=>P(k,"$close",i),c=()=>P(Y,"$open",i),M=o=>{try{return new URL(o),!0}catch{return!1}},{elements:{trigger:A,portalled:V,overlay:F,content:C,title:R,close:k},states:{open:Y}}=Ue({defaultOpen:_.apiKey==null,role:_.apiKey==null?"alertdialog":"dialog",escapeBehavior:_.apiKey==null?"ignore":"close",closeOnOutsideClick:_.apiKey!=null});let d=B(!1),w=B(O(_.apiKey??"")),K=B(O(_.host));const ae=Le(async()=>{try{const o=new Ie({host:e(K),apiKey:e(w).length>0?e(w):void 0});return await Promise.all([o.getIndexes(),o.getStats(),o.getVersion()]),!0}catch{return!1}},350);ve(()=>{if(e(K).length<3||!M(e(K)))return;const o=_.apiKey;T(d,!0),ae().then(f=>{T(d,!1),f&&(_.host=e(K),_.apiKey=e(w),localStorage.setItem("meili_host",_.host),_.apiKey!=null&&localStorage.setItem("meili_api_key",_.apiKey),o==null&&Y.set(!1))})});var S=Ge(),N=j(S);let H;q(N,o=>t().action?.(o));var Z=u(N,2);{var G=o=>{var f=He();let J;var W=p(f);let ee;q(W,s=>n().action?.(s));var L=u(W,2);let te;var U=p(L),ie=p(U);let ce;q(ie,s=>b().action?.(s));var ue=u(ie,2);{var pe=s=>{var y=Fe();he(3,y,()=>be),v(s,y)};D(ue,s=>{e(d)&&s(pe)})}var fe=u(ue,2);{var Q=s=>{var y=Re();let de;q(y,me=>m().action?.(me)),$(()=>de=E(y,de,{...m(),"aria-label":"Close config dialog",class:"i-lucide:x ml-auto cursor-pointer p-3"})),he(3,y,()=>be),v(s,y)};D(fe,s=>{_.apiKey!=null&&s(Q)})}var X=u(U,2),re=u(p(X));_e(re,{id:"apiKey",icon:"key",className:"mt-1",get value(){return e(w)},set value(s){T(w,O(s))}});var se=u(X,2),ne=u(p(se));_e(ne,{id:"host",icon:"url",className:"mt-1",get value(){return e(K)},set value(s){T(K,O(s))}}),q(L,s=>h().action?.(s)),q(f,s=>r().action?.(s)),$(()=>{J=E(f,J,{...r()}),ee=E(W,ee,{...n(),class:"z-100 fixed inset-0 bg-black/50"}),te=E(L,te,{...h(),class:"z-101 w-90% max-w-400px left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black"}),ce=E(ie,ce,{...b(),class:"m-0"})}),v(o,f)};D(Z,o=>{c()&&o(G)})}$(()=>H=E(N,H,{...t(),class:"fixed left-0 top-0 flex cursor-pointer items-center gap-1 px-4 py-3"})),v(g,S),xe(),l()}var We=x('<div> <div class="i-lucide:check h-5 w-5 opacity-0"></div> <span class="text-2.75 ml-auto"> </span></div>'),Qe=x("<div></div>"),Xe=x('<button> <span class="i-lucide:chevron-down transition-property-transform transition"></span></button> <!>',1);function Ye(g,a){ye(a,!0);const[i,l]=Se(),t=()=>P(c,"$trigger",i),r=()=>P(M,"$menu",i),n=()=>P(V,"$open",i),h=()=>P(A,"$option",i),b=()=>P(C,"$isSelected",i);let m=Ke(a,"selected");ve(()=>{m()!=null&&Ee(()=>{F.set({value:m()})})});const{elements:{trigger:c,menu:M,option:A},states:{open:V,selected:F},helpers:{isSelected:C}}=je({forceVisible:!0,positioning:{placement:"bottom",fitViewport:!0,sameWidth:!0}});F.subscribe(S=>{S!=null&&m(S.value)});var R=Xe(),k=j(R);let Y;var d=p(k),w=u(d);q(k,S=>t().action?.(S));var K=u(k,2);{var ae=S=>{var N=Qe();let H;le(N,21,()=>a.indexes,oe,(Z,G)=>{var o=We();const f=$e(()=>h()({value:e(G).uid}));let J;var W=p(o),ee=u(W),L=u(ee,2),te=p(L);q(o,U=>e(f).action?.(U)),$(U=>{J=E(o,J,{class:"data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2",...e(f)}),z(W,`${e(G).uid??""} `),I(ee,"opacity-100",U),z(te,e(G).count)},[()=>b()(e(G).uid)]),v(Z,o)}),q(N,Z=>r().action?.(Z)),$(()=>H=E(N,H,{class:"bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0",...r()})),he(3,N,()=>be,()=>({duration:150})),v(S,N)};D(K,S=>{n()&&S(ae)})}$(()=>{Y=E(k,Y,{class:"bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3",...t(),"aria-label":"Select an index"}),z(d,`${m()??"Select an index"} `),I(w,"rotate-180",n())}),v(g,R),xe(),l()}const Ze=async(g,a,i,l)=>{if(e(a)==null)return;const t=await _.client.index(e(i)).search(e(l),{page:e(a).page+1});T(a,{...t,hits:[...e(a).hits,...t.hits]})};var et=x(" <br>",1),tt=x(" <br>",1),at=x('<tr class="not-last:b-b-solid b-b-1 b-b-red-4"><td class="text-3 text-gray-4 w-fit py-1.5 pl-4 text-end"> </td><td class="text-4.5 w-full select-text px-4 py-1.5 font-serif"><!></td></tr>'),it=x('<table class="not-first:mt-4 bg-#151515 rd-lg w-full"><tbody></tbody></table>'),rt=x('<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>'),st=x('<div class="mt-4"><span> </span></div> <div class="pb-50px rd-lg mt-4 flex w-full flex-col items-center overflow-y-auto"><!> <!></div>',1),nt=x('<!> <main class="md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition"><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>â€¢</span> <span class="text-3.5"> </span></div>',1);function lt(g,a){ye(a,!0),ve(()=>{window.history.pushState({},"",window.location.pathname)});let i=B("");ve(()=>{e(i).length<2||e(t)==null||h(e(i))});let l=B([]),t=B(null);(async()=>{const d=await _.client.getStats();T(l,Object.entries(d.indexes).map(([w,{numberOfDocuments:K}])=>({uid:w,count:K}))),e(l).length===1&&T(t,O(e(l)[0].uid))})();let n=B(null);const h=qe(async d=>{const w=await _.client.index(e(t)).search(d,{page:1});T(n,w)},250);var b=nt(),m=j(b);Je(m,{});var c=u(m,2),M=p(c),A=p(M);Ye(A,{get indexes(){return e(l)},get selected(){return e(t)},set selected(d){T(t,O(d))}});var V=u(A,2);_e(V,{id:"search",icon:"search",className:"w-300px",placeholder:"Search for something...",get value(){return e(i)},set value(d){T(i,O(d))}});var F=u(M,2);{var C=d=>{var w=st(),K=j(w),ae=p(K),S=p(ae),N=u(K,2),H=p(N);le(H,17,()=>e(n).hits,oe,(o,f)=>{var J=it(),W=p(J);le(W,21,()=>Object.keys(e(f)),oe,(ee,L)=>{var te=at(),U=p(te),ie=p(U),ce=u(U),ue=p(ce);{var pe=Q=>{var X=ge(),re=j(X);le(re,17,()=>e(f)[e(L)].split(`
`),oe,(se,ne)=>{var s=et(),y=j(s);$(()=>z(y,`${e(ne)??""} `)),v(se,s)}),v(Q,X)},fe=Q=>{var X=ge(),re=j(X);{var se=s=>{var y=ge(),de=j(y);le(de,17,()=>e(f)[e(L)].split(`\r
`),oe,(me,Pe)=>{var we=tt(),Te=j(we);$(()=>z(Te,`${e(Pe)??""} `)),v(me,we)}),v(s,y)},ne=s=>{var y=Ae();$(()=>z(y,e(f)[e(L)])),v(s,y)};D(re,s=>{e(f)[e(L)].includes(`\r
`)?s(se):s(ne,!1)},!0)}v(Q,X)};D(ue,Q=>{e(f)[e(L)].includes(`
`)?Q(pe):Q(fe,!1)})}$(()=>z(ie,e(L))),v(ee,te)}),v(o,J)});var Z=u(H,2);{var G=o=>{var f=rt();f.__click=[Ze,n,t,i],v(o,f)};D(Z,o=>{(e(n).totalPages??0)>(e(n).page??0)&&o(G)})}$(()=>z(S,`${e(n).estimatedTotalHits??e(n).totalHits??e(n).hits.length??""} hits in
        ${e(n).processingTimeMs??""}ms`)),v(d,w)};D(F,d=>{e(n)!=null&&d(C)})}var R=u(c,2),k=u(p(R),4),Y=p(k);$(d=>{I(c,"pt-50px",(e(n)?.hits.length??0)>0),z(Y,d)},[()=>"fad5bd009fae211fdeb9ff8205ba4068ace9402f".slice(0,7)]),v(g,b),xe()}Me(["click"]);Ve(lt,{target:document.getElementById("root")});
