import{s as D,p as O,b as e,c as N,e as $e,f as Ke,h as y,i as F,j as S,k as Oe,l as v,m as c,n as p,q as ce,u as Ce,v as V,x as ke,y as de,z as q,A as z,B as xe,C as Se,D as ye,E as T,F as he,G as be,H as Ee,I as le,J as B,K as oe,L as Me,M as ge,N as Ae,O as Ve}from"./svelte-BwK_gUNz.js";import{c as Ue,a as je}from"./melt-C9TW1gsR.js";import{M as Ie}from"./meilisearch-DLeRBbU-.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();function qe(f,a,{signal:i,edges:n}={}){let t,s=null;const r=n!=null&&n.includes("leading"),w=n==null||n.includes("trailing"),b=()=>{s!==null&&(f.apply(t,s),t=void 0,s=null)},m=()=>{w&&b(),C()};let u=null;const I=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,m()},a)},L=()=>{u!==null&&(clearTimeout(u),u=null)},C=()=>{L(),t=void 0,s=null},R=()=>{L(),b()},k=function(...H){if(i?.aborted)return;t=this,s=H;const E=u==null;I(),r&&E&&b()};return k.schedule=I,k.cancel=C,k.flush=R,i?.addEventListener("abort",C,{once:!0}),k}const Le=(f,a,i={})=>{if(!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let n,t,s=[];return function(...r){return new Promise(w=>{const b=i.before&&!t;clearTimeout(t),t=setTimeout(()=>{t=null;const m=i.before?n:f.apply(this,r);for(w of s)w(m);s=[]},a),b?(n=f.apply(this,r),w(n)):s.push(w)})}};Le.promise=f=>{let a;return async function(...i){if(a)return a;try{return a=f.apply(this,i),await a}finally{a=void 0}}};class ze{#e=D(O(new URLSearchParams(window.location.search).get("api_key")??localStorage.getItem("meili_api_key")));get apiKey(){return e(this.#e)}set apiKey(a){N(this.#e,O(a))}#t=D(O(new URLSearchParams(window.location.search).get("host")??localStorage.getItem("meili_host")??`${window.location.protocol}//${window.location.hostname}:7700`));get host(){return e(this.#t)}set host(a){N(this.#t,O(a))}#a=$e(()=>new Ie({host:this.host,apiKey:this.apiKey??void 0,clientAgents:["mini-meili v?"]}));get client(){return e(this.#a)}}const x=new ze;var Be=y("<div></div>"),De=y("<div><!> <input></div>");function _e(f,a){let i=Ke(a,"value",15,""),n=ke(a,["$$slots","$$events","$$legacy","icon","className","value"]);var t=De();let s;var r=p(t);{var w=u=>{var I=Be();let L;S(()=>L=ce(I,1,"ml-0.5 mr-2 p-2.5",null,L,{"i-lucide:search":a.icon==="search","i-lucide:key-round":a.icon==="key","i-lucide:globe":a.icon==="url"})),v(u,I)};F(r,u=>{a.icon!=null&&u(w)})}var b=c(r,2);let m;S(()=>{s=ce(t,1,Ce(a.className),null,s,{flex:!0,"items-center":!0,"b-b-solid":!0,"b-b-2":!0,"b-red-4":!0,"bg-#151515":!0,"p-2":!0}),m=V(b,m,{id:"search",...n,class:"w-full p-0"})}),Oe(b,i),v(f,t)}var Fe=y('<div class="i-lucide:loader h-5 w-5 animate-spin"></div>'),Re=y("<button></button>"),He=y('<div><div></div> <div><div class="flex items-center gap-2"><h2>Config</h2> <!> <!></div> <label class="flex flex-col">MeiliSearch API Key: <!></label> <label class="mt-2 flex flex-col">MeiliSearch host: <!></label></div></div>'),Ge=y('<button><span class="i-lucide:settings"></span> Config</button> <!>',1);function Je(f,a){ye(a,!0);const[i,n]=Se(),t=()=>T(L,"$trigger",i),s=()=>T(C,"$portalled",i),r=()=>T(R,"$overlay",i),w=()=>T(k,"$content",i),b=()=>T(H,"$title",i),m=()=>T(E,"$close",i),u=()=>T(Y,"$open",i),I=d=>{try{return new URL(d),!0}catch{return!1}},{elements:{trigger:L,portalled:C,overlay:R,content:k,title:H,close:E},states:{open:Y}}=Ue({defaultOpen:x.apiKey==null,role:x.apiKey==null?"alertdialog":"dialog",escapeBehavior:x.apiKey==null?"ignore":"close",closeOnOutsideClick:x.apiKey!=null});let G=D(!1),o=D(O(x.apiKey??"")),_=D(O(x.host));const J=Le(async()=>{try{const d=new Ie({host:e(_),apiKey:e(o).length>0?e(o):void 0});return await Promise.all([d.getIndexes(),d.getStats(),d.getVersion()]),!0}catch{return!1}},350);de(()=>{if(e(_).length<3||!I(e(_)))return;const d=x.apiKey;N(G,!0),J().then(g=>{N(G,!1),g&&(x.host=e(_),x.apiKey=e(o),localStorage.setItem("meili_host",x.host),x.apiKey!=null&&localStorage.setItem("meili_api_key",x.apiKey),d==null&&Y.set(!1))})});var se=Ge(),K=q(se);let M;z(K,d=>t().action?.(d));var Z=c(K,2);{var ee=d=>{var g=He();let $;var U=p(g);let te;z(U,l=>r().action?.(l));var W=c(U,2);let P;var ae=p(W),Q=p(ae);let X;z(Q,l=>b().action?.(l));var ue=c(Q,2);{var ve=l=>{var h=Fe();he(3,h,()=>be),v(l,h)};F(ue,l=>{e(G)&&l(ve)})}var pe=c(ue,2);{var fe=l=>{var h=Re();let A;z(h,me=>m().action?.(me)),S(()=>A=V(h,A,{...m(),"aria-label":"Close config dialog",class:"i-lucide:x ml-auto cursor-pointer p-3"})),he(3,h,()=>be),v(l,h)};F(pe,l=>{x.apiKey!=null&&l(fe)})}var j=c(ae,2),ie=c(p(j));_e(ie,{id:"apiKey",icon:"key",className:"mt-1",get value(){return e(o)},set value(l){N(o,O(l))}});var re=c(j,2),ne=c(p(re));_e(ne,{id:"host",icon:"url",className:"mt-1",get value(){return e(_)},set value(l){N(_,O(l))}}),z(W,l=>w().action?.(l)),z(g,l=>s().action?.(l)),S(()=>{$=V(g,$,{...s()}),te=V(U,te,{...r(),class:"z-100 fixed inset-0 bg-black/50"}),P=V(W,P,{...w(),class:"z-101 w-90% max-w-400px left-50% top-50% -translate-x-50% -translate-y-50% bg-#111 rd-xl fixed p-5 shadow-lg shadow-black"}),X=V(Q,X,{...b(),class:"m-0"})}),v(d,g)};F(Z,d=>{u()&&d(ee)})}S(()=>M=V(K,M,{...t(),class:"fixed left-0 top-0 flex cursor-pointer items-center gap-1 px-4 py-3"})),v(f,se),xe(),n()}var We=y('<div> <div></div> <span class="text-2.75 ml-auto"> </span></div>'),Qe=y("<div></div>"),Xe=y("<button> <span></span></button> <!>",1);function Ye(f,a){ye(a,!0);const[i,n]=Se(),t=()=>T(u,"$trigger",i),s=()=>T(I,"$menu",i),r=()=>T(C,"$open",i),w=()=>T(L,"$option",i),b=()=>T(k,"$isSelected",i);let m=Ke(a,"selected");de(()=>{m()!=null&&Ee(()=>{R.set({value:m()})})});const{elements:{trigger:u,menu:I,option:L},states:{open:C,selected:R},helpers:{isSelected:k}}=je({forceVisible:!0,positioning:{placement:"bottom",fitViewport:!0,sameWidth:!0}});R.subscribe(K=>{K!=null&&m(K.value)});var H=Xe(),E=q(H);let Y;var G=p(E),o=c(G);let _;z(E,K=>t().action?.(K));var J=c(E,2);{var se=K=>{var M=Qe();let Z;le(M,21,()=>a.indexes,oe,(ee,d)=>{var g=We();const $=$e(()=>w()({value:e(d).uid}));let U;var te=p(g),W=c(te);let P;var ae=c(W,2),Q=p(ae);z(g,X=>e($).action?.(X)),S(X=>{U=V(g,U,{class:"data-[highlighted]:bg-#181818 data-[highlighted]:text-red-4 data-[selected]:text-red-4 relative flex cursor-pointer items-center gap-2 p-2",...e($)}),B(te,`${e(d).uid??""} `),P=ce(W,1,"i-lucide:check h-5 w-5 opacity-0",null,P,{"opacity-100":X}),B(Q,e(d).count)},[()=>b()(e(d).uid)]),v(ee,g)}),z(M,ee=>s().action?.(ee)),S(()=>Z=V(M,Z,{class:"bg-#151515 z-10 flex max-h-[300px] flex-col overflow-y-auto focus:!ring-0",...s()})),he(3,M,()=>be,()=>({duration:150})),v(K,M)};F(J,K=>{r()&&K(se)})}S(()=>{Y=V(E,Y,{class:"bg-#151515 b-b-solid b-b-2 b-red-4 flex min-w-[175px] items-center justify-between pl-4 pr-3",...t(),"aria-label":"Select an index"}),B(G,`${m()??"Select an index"} `),_=ce(o,1,"i-lucide:chevron-down transition-property-transform transition",null,_,{"rotate-180":r()})}),v(f,H),xe(),n()}const Ze=async(f,a,i,n)=>{if(e(a)==null)return;const t=await x.client.index(e(i)).search(e(n),{page:e(a).page+1});N(a,{...t,hits:[...e(a).hits,...t.hits]})};var et=y(" <br>",1),tt=y(" <br>",1),at=y('<tr class="not-last:b-b-solid b-b-1 b-b-red-4"><td class="text-3 text-gray-4 w-fit py-1.5 pl-4 text-end"> </td><td class="text-4.5 w-full select-text px-4 py-1.5 font-serif"><!></td></tr>'),it=y('<table class="not-first:mt-4 bg-#151515 rd-lg w-full"><tbody></tbody></table>'),st=y('<button class="bg-#151515 b-solid b-1 b-red-4 b-rd-lg mt-4 cursor-pointer p-2 px-4">Load more</button>'),rt=y('<div class="mt-4"><span> </span></div> <div class="pb-50px rd-lg mt-4 flex w-full flex-col items-center overflow-y-auto"><!> <!></div>',1),nt=y('<!> <main><div class="flex gap-2"><!> <!></div> <!></main> <div class="text-gray-4 mt-auto flex shrink-0 items-center justify-center gap-2 p-1"><a target="_blank" rel="noopener" href="https://github.com/beeequeue/mini-meili" class="flex items-center"><div class="i-simple-icons:github mr-1"></div> made by beequeue</a> <span>â€¢</span> <span class="text-3.5"> </span></div>',1);function lt(f,a){ye(a,!0),de(()=>{window.history.pushState({},"",window.location.pathname)});let i=D("");de(()=>{e(i).length<2||e(t)==null||w(e(i))});let n=D([]),t=D(null);(async()=>{const o=await x.client.getStats();N(n,Object.entries(o.indexes).map(([_,{numberOfDocuments:J}])=>({uid:_,count:J}))),e(n).length===1&&N(t,O(e(n)[0].uid))})();let r=D(null);const w=qe(async o=>{const _=await x.client.index(e(t)).search(o,{page:1});N(r,_)},250);var b=nt(),m=q(b);Je(m,{});var u=c(m,2);let I;var L=p(u),C=p(L);Ye(C,{get indexes(){return e(n)},get selected(){return e(t)},set selected(o){N(t,O(o))}});var R=c(C,2);_e(R,{id:"search",icon:"search",className:"w-300px",placeholder:"Search for something...",get value(){return e(i)},set value(o){N(i,O(o))}});var k=c(L,2);{var H=o=>{var _=rt(),J=q(_),se=p(J),K=p(se),M=c(J,2),Z=p(M);le(Z,17,()=>e(r).hits,oe,(g,$)=>{var U=it(),te=p(U);le(te,21,()=>Object.keys(e($)),oe,(W,P)=>{var ae=at(),Q=p(ae),X=p(Q),ue=c(Q),ve=p(ue);{var pe=j=>{var ie=ge(),re=q(ie);le(re,17,()=>e($)[e(P)].split(`
`),oe,(ne,l)=>{var h=et(),A=q(h);S(()=>B(A,`${e(l)??""} `)),v(ne,h)}),v(j,ie)},fe=j=>{var ie=ge(),re=q(ie);{var ne=h=>{var A=ge(),me=q(A);le(me,17,()=>e($)[e(P)].split(`\r
`),oe,(Pe,Te)=>{var we=tt(),Ne=q(we);S(()=>B(Ne,`${e(Te)??""} `)),v(Pe,we)}),v(h,A)},l=h=>{var A=Ae();S(()=>B(A,e($)[e(P)])),v(h,A)};F(re,h=>{e($)[e(P)].includes(`\r
`)?h(ne):h(l,!1)},!0)}v(j,ie)};F(ve,j=>{e($)[e(P)].includes(`
`)?j(pe):j(fe,!1)})}S(()=>B(X,e(P))),v(W,ae)}),v(g,U)});var ee=c(Z,2);{var d=g=>{var $=st();$.__click=[Ze,r,t,i],v(g,$)};F(ee,g=>{(e(r).totalPages??0)>(e(r).page??0)&&g(d)})}S(()=>B(K,`${e(r).estimatedTotalHits??e(r).totalHits??e(r).hits.length??""} hits in
        ${e(r).processingTimeMs??""}ms`)),v(o,_)};F(k,o=>{e(r)!=null&&o(H)})}var E=c(u,2),Y=c(p(E),4),G=p(Y);S(o=>{I=ce(u,1,"md:min-w-650px w-100% md:w-65% pt-45vh transition-duration-750ms transition-property-padding relative mx-auto flex h-full min-h-0 flex-col items-center transition",null,I,{"pt-50px":(e(r)?.hits.length??0)>0}),B(G,o)},[()=>"f4399f0316b4785b7ce9e6c66d3c19ba2ffd3c88".slice(0,7)]),v(f,b),xe()}Me(["click"]);Ve(lt,{target:document.getElementById("root")});
